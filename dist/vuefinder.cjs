"use strict";var yr=Object.defineProperty;var Er=(n,t,o)=>t in n?yr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o;var On=(n,t,o)=>Er(n,typeof t!="symbol"?t+"":t,o);const e=require("vue"),Vr=require("mitt"),Sr=require("dragselect"),Nr=require("@uppy/core"),xr=require("@uppy/xhr-upload"),Br=require("vanilla-lazyload");require("cropperjs/dist/cropper.css");const Cr=require("cropperjs");var ro;const Wt=(ro=document.querySelector('meta[name="csrf-token"]'))==null?void 0:ro.getAttribute("content");class $r{constructor(t){On(this,"config");this.config=t}get config(){return this.config}transformRequestParams(t){const o=this.config,s={};Wt!=null&&Wt!==""&&(s[o.xsrfHeaderName]=Wt);const r=Object.assign({},o.headers,s,t.headers),i=Object.assign({},o.params,t.params),a=t.body,c=o.baseUrl+t.url,l=t.method;let d;l!=="get"&&(a instanceof FormData?(d=a,o.body!=null&&Object.entries(this.config.body).forEach(([u,f])=>{d.append(u,f)})):(d={...a},o.body!=null&&Object.assign(d,this.config.body)));const m={url:c,method:l,headers:r,params:i,body:d};if(o.transformRequest!=null){const u=o.transformRequest({url:c,method:l,headers:r,params:i,body:d});u.url!=null&&(m.url=u.url),u.method!=null&&(m.method=u.method),u.params!=null&&(m.params=u.params??{}),u.headers!=null&&(m.headers=u.headers??{}),u.body!=null&&(m.body=u.body)}return m}getDownloadUrl(t,o){if(o.url!=null)return o.url;const s=this.transformRequestParams({url:"",method:"get",params:{q:"download",adapter:t,path:o.path}});return s.url+"?"+new URLSearchParams(s.params).toString()}getPreviewUrl(t,o){if(o.url!=null)return o.url;const s=this.transformRequestParams({url:"",method:"get",params:{q:"preview",adapter:t,path:o.path}});return s.url+"?"+new URLSearchParams(s.params).toString()}async send(t){const o=this.transformRequestParams(t),s=t.responseType||"json",r={method:t.method,headers:o.headers,signal:t.abortSignal},i=o.url+"?"+new URLSearchParams(o.params);if(o.method!=="get"&&o.body!=null){let c;o.body instanceof FormData?c=t.body:(c=JSON.stringify(o.body),r.headers["Content-Type"]="application/json"),r.body=c}const a=await fetch(i,r);if(a.ok)return await a[s]();throw await a.json()}}function Dr(n){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token"};return typeof n=="string"?Object.assign(t,{baseUrl:n}):Object.assign(t,n),new $r(t)}function Tr(n){let t=localStorage.getItem(n+"_storage");const o=e.reactive(JSON.parse(t??"{}"));e.watch(o,s);function s(){Object.keys(o).length?localStorage.setItem(n+"_storage",JSON.stringify(o)):localStorage.removeItem(n+"_storage")}function r(l,d){o[l]=d}function i(l){delete o[l]}function a(){Object.keys(o).map(l=>i(l))}return{getStore:(l,d=null)=>o.hasOwnProperty(l)?o[l]:d,setStore:r,removeStore:i,clearStore:a}}async function Mr(n,t){const o=t[n];return typeof o=="function"?(await o()).default:o}function Ar(n,t,o,s){const{getStore:r,setStore:i}=n,a=e.ref({}),c=e.ref(r("locale",t)),l=(u,f=t)=>{Mr(u,s).then(v=>{a.value=v,i("locale",u),c.value=u,i("translations",v),Object.values(s).length>1&&(o.emit("vf-toast-push",{label:"The language is set to "+u}),o.emit("vf-language-saved"))}).catch(v=>{f?(o.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),l(f,null)):o.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"})})};e.watch(c,u=>{l(u)}),!r("locale")&&!s.length?l(t):a.value=r("translations");const d=(u,...f)=>f.length?d(u=u.replace("%s",f.shift()),...f):u;function m(u,...f){return a.value&&a.value.hasOwnProperty(u)?d(a.value[u],...f):d(u,...f)}return e.reactive({t:m,locale:c})}const J={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",UPDATEDOCTYPE:"update_doctype",LANGUAGE:"language"},Lr=Object.values(J),Fr="2.5.16";function so(n,t,o,s,r){return(t=Math,o=t.log,s=1024,r=o(n)/o(s)|0,n/t.pow(s,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"iB":"B")}function lo(n,t,o,s,r){return(t=Math,o=t.log,s=1e3,r=o(n)/o(s)|0,n/t.pow(s,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"B":"B")}function Or(n){const t={k:1,m:2,g:3,t:4},s=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(n);return s[1]*Math.pow(1024,t[s[2].toLowerCase()])}const Oe={SYSTEM:"system",LIGHT:"light",DARK:"dark"};function Rr(n,t){const o=e.ref(Oe.SYSTEM),s=e.ref(Oe.LIGHT);o.value=n.getStore("theme",t??Oe.SYSTEM);const r=window.matchMedia("(prefers-color-scheme: dark)"),i=a=>{o.value===Oe.DARK||o.value===Oe.SYSTEM&&a.matches?s.value=Oe.DARK:s.value=Oe.LIGHT};return i(r),r.addEventListener("change",i),{value:o,actualValue:s,set(a){o.value=a,a!==Oe.SYSTEM?n.setStore("theme",a):n.removeStore("theme"),i(r)}}}function Hr(){const n=e.shallowRef(null),t=e.ref(!1),o=e.ref();return{visible:t,type:n,data:o,open:(i,a=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,n.value=i,o.value=a},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,n.value=null}}}/*!
 * OverlayScrollbars
 * Version: 2.10.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const pe=(n,t)=>{const{o,i:s,u:r}=n;let i=o,a;const c=(m,u)=>{const f=i,v=m,_=u||(s?!s(f,v):f!==v);return(_||r)&&(i=v,a=f),[i,_,a]};return[t?m=>c(t(i,a),m):c,m=>[i,!!m,a]]},zr=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,ve=zr?window:{},ao=Math.max,Ur=Math.min,en=Math.round,St=Math.abs,Rn=Math.sign,io=ve.cancelAnimationFrame,gn=ve.requestAnimationFrame,Nt=ve.setTimeout,tn=ve.clearTimeout,At=n=>typeof ve[n]<"u"?ve[n]:void 0,Ir=At("MutationObserver"),Hn=At("IntersectionObserver"),xt=At("ResizeObserver"),bt=At("ScrollTimeline"),kn=n=>n===void 0,Lt=n=>n===null,Se=n=>typeof n=="number",it=n=>typeof n=="string",wn=n=>typeof n=="boolean",we=n=>typeof n=="function",Ne=n=>Array.isArray(n),Bt=n=>typeof n=="object"&&!Ne(n)&&!Lt(n),bn=n=>{const t=!!n&&n.length,o=Se(t)&&t>-1&&t%1==0;return Ne(n)||!we(n)&&o?t>0&&Bt(n)?t-1 in n:!0:!1},Ct=n=>!!n&&n.constructor===Object,$t=n=>n instanceof HTMLElement,Ft=n=>n instanceof Element;function Y(n,t){if(bn(n))for(let o=0;o<n.length&&t(n[o],o,n)!==!1;o++);else n&&Y(Object.keys(n),o=>t(n[o],o,n));return n}const co=(n,t)=>n.indexOf(t)>=0,st=(n,t)=>n.concat(t),oe=(n,t,o)=>(!it(t)&&bn(t)?Array.prototype.push.apply(n,t):n.push(t),n),ze=n=>Array.from(n||[]),yn=n=>Ne(n)?n:!it(n)&&bn(n)?ze(n):[n],nn=n=>!!n&&!n.length,on=n=>ze(new Set(n)),ge=(n,t,o)=>{Y(n,r=>r?r.apply(void 0,t||[]):!0),!o&&(n.length=0)},uo="paddingTop",mo="paddingRight",fo="paddingLeft",vo="paddingBottom",po="marginLeft",_o="marginRight",ho="marginBottom",go="overflowX",ko="overflowY",Ot="width",Rt="height",Re="visible",Ie="hidden",Je="scroll",jr=n=>{const t=String(n||"");return t?t[0].toUpperCase()+t.slice(1):""},Ht=(n,t,o,s)=>{if(n&&t){let r=!0;return Y(o,i=>{const a=n[i],c=t[i];a!==c&&(r=!1)}),r}return!1},wo=(n,t)=>Ht(n,t,["w","h"]),yt=(n,t)=>Ht(n,t,["x","y"]),qr=(n,t)=>Ht(n,t,["t","r","b","l"]),je=()=>{},R=(n,...t)=>n.bind(0,...t),Ke=n=>{let t;const o=n?Nt:gn,s=n?tn:io;return[r=>{s(t),t=o(()=>r(),we(n)?n():n)},()=>s(t)]},rn=(n,t)=>{const{_:o,v:s,p:r,S:i}=t||{};let a,c,l,d,m=je;const u=function(p){m(),tn(a),d=a=c=void 0,m=je,n.apply(this,p)},f=D=>i&&c?i(c,D):D,v=()=>{m!==je&&u(f(l)||l)},_=function(){const p=ze(arguments),y=we(o)?o():o;if(Se(y)&&y>=0){const B=we(s)?s():s,k=Se(B)&&B>=0,b=y>0?Nt:gn,x=y>0?tn:io,M=f(p)||p,E=u.bind(0,M);let w;m(),r&&!d?(E(),d=!0,w=b(()=>d=void 0,y)):(w=b(E,y),k&&!a&&(a=Nt(v,B))),m=()=>x(w),c=l=M}else u(p)};return _.m=v,_},bo=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),be=n=>n?Object.keys(n):[],K=(n,t,o,s,r,i,a)=>{const c=[t,o,s,r,i,a];return(typeof n!="object"||Lt(n))&&!we(n)&&(n={}),Y(c,l=>{Y(l,(d,m)=>{const u=l[m];if(n===u)return!0;const f=Ne(u);if(u&&Ct(u)){const v=n[m];let _=v;f&&!Ne(v)?_=[]:!f&&!Ct(v)&&(_={}),n[m]=K(_,u)}else n[m]=f?u.slice():u})}),n},yo=(n,t)=>Y(K({},n),(o,s,r)=>{o===void 0?delete r[s]:o&&Ct(o)&&(r[s]=yo(o))}),En=n=>!be(n).length,Eo=(n,t,o)=>ao(n,Ur(t,o)),qe=n=>on((Ne(n)?n:(n||"").split(" ")).filter(t=>t)),Vn=(n,t)=>n&&n.getAttribute(t),zn=(n,t)=>n&&n.hasAttribute(t),Te=(n,t,o)=>{Y(qe(t),s=>{n&&n.setAttribute(s,String(o||""))})},Ee=(n,t)=>{Y(qe(t),o=>n&&n.removeAttribute(o))},zt=(n,t)=>{const o=qe(Vn(n,t)),s=R(Te,n,t),r=(i,a)=>{const c=new Set(o);return Y(qe(i),l=>{c[a](l)}),ze(c).join(" ")};return{O:i=>s(r(i,"delete")),$:i=>s(r(i,"add")),C:i=>{const a=qe(i);return a.reduce((c,l)=>c&&o.includes(l),a.length>0)}}},Vo=(n,t,o)=>(zt(n,t).O(o),R(Sn,n,t,o)),Sn=(n,t,o)=>(zt(n,t).$(o),R(Vo,n,t,o)),Dt=(n,t,o,s)=>(s?Sn:Vo)(n,t,o),Nn=(n,t,o)=>zt(n,t).C(o),So=n=>zt(n,"class"),No=(n,t)=>{So(n).O(t)},xn=(n,t)=>(So(n).$(t),R(No,n,t)),xo=(n,t)=>{const o=t?Ft(t)&&t:document;return o?ze(o.querySelectorAll(n)):[]},Pr=(n,t)=>{const o=t?Ft(t)&&t:document;return o&&o.querySelector(n)},sn=(n,t)=>Ft(n)&&n.matches(t),Bo=n=>sn(n,"body"),ln=n=>n?ze(n.childNodes):[],lt=n=>n&&n.parentElement,We=(n,t)=>Ft(n)&&n.closest(t),an=n=>document.activeElement,Gr=(n,t,o)=>{const s=We(n,t),r=n&&Pr(o,s),i=We(r,t)===s;return s&&r?s===n||r===n||i&&We(We(n,o),t)!==s:!1},Ze=n=>{Y(yn(n),t=>{const o=lt(t);t&&o&&o.removeChild(t)})},_e=(n,t)=>R(Ze,n&&t&&Y(yn(t),o=>{o&&n.appendChild(o)})),Ye=n=>{const t=document.createElement("div");return Te(t,"class",n),t},Co=n=>{const t=Ye();return t.innerHTML=n.trim(),Y(ln(t),o=>Ze(o))},Un=(n,t)=>n.getPropertyValue(t)||n[t]||"",$o=n=>{const t=n||0;return isFinite(t)?t:0},gt=n=>$o(parseFloat(n||"")),cn=n=>Math.round(n*1e4)/1e4,Do=n=>`${cn($o(n))}px`;function at(n,t){n&&t&&Y(t,(o,s)=>{try{const r=n.style,i=Lt(o)||wn(o)?"":Se(o)?Do(o):o;s.indexOf("--")===0?r.setProperty(s,i):r[s]=i}catch{}})}function Ae(n,t,o){const s=it(t);let r=s?"":{};if(n){const i=ve.getComputedStyle(n,o)||n.style;r=s?Un(i,t):ze(t).reduce((a,c)=>(a[c]=Un(i,c),a),r)}return r}const In=(n,t,o)=>{const s=t?`${t}-`:"",r=o?`-${o}`:"",i=`${s}top${r}`,a=`${s}right${r}`,c=`${s}bottom${r}`,l=`${s}left${r}`,d=Ae(n,[i,a,c,l]);return{t:gt(d[i]),r:gt(d[a]),b:gt(d[c]),l:gt(d[l])}},Kr=(n,t)=>`translate${Bt(n)?`(${n.x},${n.y})`:`Y(${n})`}`,Wr=n=>!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length),Yr={w:0,h:0},Ut=(n,t)=>t?{w:t[`${n}Width`],h:t[`${n}Height`]}:Yr,Xr=n=>Ut("inner",n||ve),Xe=R(Ut,"offset"),To=R(Ut,"client"),Tt=R(Ut,"scroll"),Bn=n=>{const t=parseFloat(Ae(n,Ot))||0,o=parseFloat(Ae(n,Rt))||0;return{w:t-en(t),h:o-en(o)}},Yt=n=>n.getBoundingClientRect(),Jr=n=>!!n&&Wr(n),dn=n=>!!(n&&(n[Rt]||n[Ot])),Mo=(n,t)=>{const o=dn(n);return!dn(t)&&o},jn=(n,t,o,s)=>{Y(qe(t),r=>{n&&n.removeEventListener(r,o,s)})},Q=(n,t,o,s)=>{var r;const i=(r=s&&s.H)!=null?r:!0,a=s&&s.I||!1,c=s&&s.A||!1,l={passive:i,capture:a};return R(ge,qe(t).map(d=>{const m=c?u=>{jn(n,d,m,a),o&&o(u)}:o;return n&&n.addEventListener(d,m,l),R(jn,n,d,m,a)}))},Ao=n=>n.stopPropagation(),un=n=>n.preventDefault(),Lo=n=>Ao(n)||un(n),Ve=(n,t)=>{const{x:o,y:s}=Se(t)?{x:t,y:t}:t||{};Se(o)&&(n.scrollLeft=o),Se(s)&&(n.scrollTop=s)},he=n=>({x:n.scrollLeft,y:n.scrollTop}),Fo=()=>({D:{x:0,y:0},M:{x:0,y:0}}),Zr=(n,t)=>{const{D:o,M:s}=n,{w:r,h:i}=t,a=(u,f,v)=>{let _=Rn(u)*v,D=Rn(f)*v;if(_===D){const p=St(u),y=St(f);D=p>y?0:D,_=p<y?0:_}return _=_===D?0:_,[_+0,D+0]},[c,l]=a(o.x,s.x,r),[d,m]=a(o.y,s.y,i);return{D:{x:c,y:d},M:{x:l,y:m}}},qn=({D:n,M:t})=>{const o=(s,r)=>s===0&&s<=r;return{x:o(n.x,t.x),y:o(n.y,t.y)}},Pn=({D:n,M:t},o)=>{const s=(r,i,a)=>Eo(0,1,(r-a)/(r-i)||0);return{x:s(n.x,t.x,o.x),y:s(n.y,t.y,o.y)}},mn=n=>{n&&n.focus&&n.focus({preventScroll:!0})},Gn=(n,t)=>{Y(yn(t),n)},fn=n=>{const t=new Map,o=(i,a)=>{if(i){const c=t.get(i);Gn(l=>{c&&c[l?"delete":"clear"](l)},a)}else t.forEach(c=>{c.clear()}),t.clear()},s=(i,a)=>{if(it(i)){const d=t.get(i)||new Set;return t.set(i,d),Gn(m=>{we(m)&&d.add(m)},a),R(o,i,a)}wn(a)&&a&&o();const c=be(i),l=[];return Y(c,d=>{const m=i[d];m&&oe(l,s(d,m))}),R(ge,l)},r=(i,a)=>{Y(ze(t.get(i)),c=>{a&&!nn(a)?c.apply(0,a):c()})};return s(n||{}),[s,o,r]},Kn=n=>JSON.stringify(n,(t,o)=>{if(we(o))throw 0;return o}),Wn=(n,t)=>n?`${t}`.split(".").reduce((o,s)=>o&&bo(o,s)?o[s]:void 0,n):void 0,Qr={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},Oo=(n,t)=>{const o={},s=st(be(t),be(n));return Y(s,r=>{const i=n[r],a=t[r];if(Bt(i)&&Bt(a))K(o[r]={},Oo(i,a)),En(o[r])&&delete o[r];else if(bo(t,r)&&a!==i){let c=!0;if(Ne(i)||Ne(a))try{Kn(i)===Kn(a)&&(c=!1)}catch{}c&&(o[r]=a)}}),o},Yn=(n,t,o)=>s=>[Wn(n,s),o||Wn(t,s)!==void 0],et="data-overlayscrollbars",Et="os-environment",kt=`${Et}-scrollbar-hidden`,Xt=`${et}-initialize`,Vt="noClipping",Xn=`${et}-body`,He=et,es="host",Me=`${et}-viewport`,ts=go,ns=ko,os="arrange",Ro="measuring",rs="scrolling",Ho="scrollbarHidden",ss="noContent",vn=`${et}-padding`,Jn=`${et}-content`,Cn="os-size-observer",ls=`${Cn}-appear`,as=`${Cn}-listener`,is="os-trinsic-observer",cs="os-theme-none",ke="os-scrollbar",ds=`${ke}-rtl`,us=`${ke}-horizontal`,ms=`${ke}-vertical`,zo=`${ke}-track`,$n=`${ke}-handle`,fs=`${ke}-visible`,vs=`${ke}-cornerless`,Zn=`${ke}-interaction`,Qn=`${ke}-unusable`,pn=`${ke}-auto-hide`,eo=`${pn}-hidden`,to=`${ke}-wheel`,ps=`${zo}-interactive`,_s=`${$n}-interactive`;let Uo;const hs=()=>Uo,gs=n=>{Uo=n};let Jt;const ks=()=>{const n=(k,b,x)=>{_e(document.body,k),_e(document.body,k);const F=To(k),M=Xe(k),E=Bn(b);return x&&Ze(k),{x:M.h-F.h+E.h,y:M.w-F.w+E.w}},t=k=>{let b=!1;const x=xn(k,kt);try{b=Ae(k,"scrollbar-width")==="none"||Ae(k,"display","::-webkit-scrollbar")==="none"}catch{}return x(),b},o=`.${Et}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${Et} div{width:200%;height:200%;margin:10px 0}.${kt}{scrollbar-width:none!important}.${kt}::-webkit-scrollbar,.${kt}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,r=Co(`<div class="${Et}"><div></div><style>${o}</style></div>`)[0],i=r.firstChild,a=r.lastChild,c=hs();c&&(a.nonce=c);const[l,,d]=fn(),[m,u]=pe({o:n(r,i),i:yt},R(n,r,i,!0)),[f]=u(),v=t(r),_={x:f.x===0,y:f.y===0},D={elements:{host:null,padding:!v,viewport:k=>v&&Bo(k)&&k,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},p=K({},Qr),y=R(K,{},p),N=R(K,{},D),B={T:f,k:_,R:v,V:!!bt,L:R(l,"r"),U:N,P:k=>K(D,k)&&N(),N:y,q:k=>K(p,k)&&y(),B:K({},D),F:K({},p)};if(Ee(r,"style"),Ze(r),Q(ve,"resize",()=>{d("r",[])}),we(ve.matchMedia)&&!v&&(!_.x||!_.y)){const k=b=>{const x=ve.matchMedia(`(resolution: ${ve.devicePixelRatio}dppx)`);Q(x,"change",()=>{b(),k(b)},{A:!0})};k(()=>{const[b,x]=m();K(B.T,b),d("r",[x])})}return B},Be=()=>(Jt||(Jt=ks()),Jt),Io=(n,t)=>we(t)?t.apply(0,n):t,ws=(n,t,o,s)=>{const r=kn(s)?o:s;return Io(n,r)||t.apply(0,n)},jo=(n,t,o,s)=>{const r=kn(s)?o:s,i=Io(n,r);return!!i&&($t(i)?i:t.apply(0,n))},bs=(n,t)=>{const{nativeScrollbarsOverlaid:o,body:s}=t||{},{k:r,R:i,U:a}=Be(),{nativeScrollbarsOverlaid:c,body:l}=a().cancel,d=o??c,m=kn(s)?l:s,u=(r.x||r.y)&&d,f=n&&(Lt(m)?!i:m);return!!u||!!f},Dn=new WeakMap,ys=(n,t)=>{Dn.set(n,t)},Es=n=>{Dn.delete(n)},qo=n=>Dn.get(n),Vs=(n,t,o)=>{let s=!1;const r=o?new WeakMap:!1,i=()=>{s=!0},a=c=>{if(r&&o){const l=o.map(d=>{const[m,u]=d||[];return[u&&m?(c||xo)(m,n):[],u]});Y(l,d=>Y(d[0],m=>{const u=d[1],f=r.get(m)||[];if(n.contains(m)&&u){const _=Q(m,u,D=>{s?(_(),r.delete(m)):t(D)});r.set(m,oe(f,_))}else ge(f),r.delete(m)}))}};return a(),[i,a]},no=(n,t,o,s)=>{let r=!1;const{j:i,X:a,Y:c,W:l,J:d,G:m}=s||{},u=rn(()=>r&&o(!0),{_:33,v:99}),[f,v]=Vs(n,u,c),_=i||[],D=a||[],p=st(_,D),y=(B,k)=>{if(!nn(k)){const b=d||je,x=m||je,F=[],M=[];let E=!1,w=!1;if(Y(k,$=>{const{attributeName:A,target:H,type:z,oldValue:q,addedNodes:j,removedNodes:G}=$,W=z==="attributes",P=z==="childList",ee=n===H,g=W&&A,C=g&&Vn(H,A||""),S=it(C)?C:null,V=g&&q!==S,h=co(D,A)&&V;if(t&&(P||!ee)){const T=W&&V,L=T&&l&&sn(H,l),I=(L?!b(H,A,q,S):!W||T)&&!x($,!!L,n,s);Y(j,X=>oe(F,X)),Y(G,X=>oe(F,X)),w=w||I}!t&&ee&&V&&!b(H,A,q,S)&&(oe(M,A),E=E||h)}),v($=>on(F).reduce((A,H)=>(oe(A,xo($,H)),sn(H,$)?oe(A,H):A),[])),t)return!B&&w&&o(!1),[!1];if(!nn(M)||E){const $=[on(M),E];return!B&&o.apply(0,$),$}}},N=new Ir(R(y,!1));return[()=>(N.observe(n,{attributes:!0,attributeOldValue:!0,attributeFilter:p,subtree:t,childList:t,characterData:t}),r=!0,()=>{r&&(f(),N.disconnect(),r=!1)}),()=>{if(r)return u.m(),y(!0,N.takeRecords())}]},Po={},Go={},Ss=n=>{Y(n,t=>Y(t,(o,s)=>{Po[s]=t[s]}))},Ko=(n,t,o)=>be(n).map(s=>{const{static:r,instance:i}=n[s],[a,c,l]=o||[],d=o?i:r;if(d){const m=o?d(a,c,t):d(t);return(l||Go)[s]=m}}),ct=n=>Go[n],Ns="__osOptionsValidationPlugin",xs="__osSizeObserverPlugin",Bs=(n,t)=>{const{k:o}=t,[s,r]=n("showNativeOverlaidScrollbars");return[s&&o.x&&o.y,r]},Qe=n=>n.indexOf(Re)===0,Cs=(n,t)=>{const o=(r,i,a,c)=>{const l=r===Re?Ie:r.replace(`${Re}-`,""),d=Qe(r),m=Qe(a);return!i&&!c?Ie:d&&m?Re:d?i&&c?l:i?Re:Ie:i?l:m&&c?Re:Ie},s={x:o(t.x,n.x,t.y,n.y),y:o(t.y,n.y,t.x,n.x)};return{K:s,Z:{x:s.x===Je,y:s.y===Je}}},Wo="__osScrollbarsHidingPlugin",$s="__osClickScrollPlugin",Yo=(n,t,o)=>{const{dt:s}=o||{},r=ct(xs),[i]=pe({o:!1,u:!0});return()=>{const a=[],l=Co(`<div class="${Cn}"><div class="${as}"></div></div>`)[0],d=l.firstChild,m=u=>{const f=u instanceof ResizeObserverEntry;let v=!1,_=!1;if(f){const[D,,p]=i(u.contentRect),y=dn(D);_=Mo(D,p),v=!_&&!y}else _=u===!0;v||t({ft:!0,dt:_})};if(xt){const u=new xt(f=>m(f.pop()));u.observe(d),oe(a,()=>{u.disconnect()})}else if(r){const[u,f]=r(d,m,s);oe(a,st([xn(l,ls),Q(l,"animationstart",u)],f))}else return je;return R(ge,oe(a,_e(n,l)))}},Ds=(n,t)=>{let o;const s=l=>l.h===0||l.isIntersecting||l.intersectionRatio>0,r=Ye(is),[i]=pe({o:!1}),a=(l,d)=>{if(l){const m=i(s(l)),[,u]=m;return u&&!d&&t(m)&&[m]}},c=(l,d)=>a(d.pop(),l);return[()=>{const l=[];if(Hn)o=new Hn(R(c,!1),{root:n}),o.observe(r),oe(l,()=>{o.disconnect()});else{const d=()=>{const m=Xe(r);a(m)};oe(l,Yo(r,d)()),d()}return R(ge,oe(l,_e(n,r)))},()=>o&&c(!0,o.takeRecords())]},Ts=(n,t,o,s)=>{let r,i,a,c,l,d;const m=`[${He}]`,u=`[${Me}]`,f=["id","class","style","open","wrap","cols","rows"],{vt:v,ht:_,ot:D,gt:p,bt:y,nt:N,wt:B,yt:k,St:b,Ot:x}=n,F=h=>Ae(h,"direction")==="rtl",M={$t:!1,ct:F(v)},E=Be(),w=ct(Wo),[$]=pe({i:wo,o:{w:0,h:0}},()=>{const h=w&&w.tt(n,t,M,E,o).ut,L=!(B&&N)&&Nn(_,He,Vt),O=!N&&k(os),I=O&&he(p),X=I&&x(),se=b(Ro,L),te=O&&h&&h()[0],ce=Tt(D),U=Bn(D);return te&&te(),Ve(p,I),X&&X(),L&&se(),{w:ce.w+U.w,h:ce.h+U.h}}),A=rn(s,{_:()=>r,v:()=>i,S(h,T){const[L]=h,[O]=T;return[st(be(L),be(O)).reduce((I,X)=>(I[X]=L[X]||O[X],I),{})]}}),H=h=>{const T=F(v);K(h,{Ct:d!==T}),K(M,{ct:T}),d=T},z=(h,T)=>{const[L,O]=h,I={xt:O};return K(M,{$t:L}),!T&&s(I),I},q=({ft:h,dt:T})=>{const O=!(h&&!T)&&E.R?A:s,I={ft:h||T,dt:T};H(I),O(I)},j=(h,T)=>{const[,L]=$(),O={Ht:L};return H(O),L&&!T&&(h?s:A)(O),O},G=(h,T,L)=>{const O={Et:T};return H(O),T&&!L&&A(O),O},[W,P]=y?Ds(_,z):[],ee=!N&&Yo(_,q,{dt:!0}),[g,C]=no(_,!1,G,{X:f,j:f}),S=N&&xt&&new xt(h=>{const T=h[h.length-1].contentRect;q({ft:!0,dt:Mo(T,l)}),l=T}),V=rn(()=>{const[,h]=$();s({Ht:h})},{_:222,p:!0});return[()=>{S&&S.observe(_);const h=ee&&ee(),T=W&&W(),L=g(),O=E.L(I=>{I?A({zt:I}):V()});return()=>{S&&S.disconnect(),h&&h(),T&&T(),c&&c(),L(),O()}},({It:h,At:T,Dt:L})=>{const O={},[I]=h("update.ignoreMutation"),[X,se]=h("update.attributes"),[te,ce]=h("update.elementEvents"),[U,de]=h("update.debounce"),me=ce||se,ae=T||L,ue=re=>we(I)&&I(re);if(me){a&&a(),c&&c();const[re,le]=no(y||D,!0,j,{j:st(f,X||[]),Y:te,W:m,G:(Z,ne)=>{const{target:ie,attributeName:fe}=Z;return(!ne&&fe&&!N?Gr(ie,m,u):!1)||!!We(ie,`.${ke}`)||!!ue(Z)}});c=re(),a=le}if(de)if(A.m(),Ne(U)){const re=U[0],le=U[1];r=Se(re)&&re,i=Se(le)&&le}else Se(U)?(r=U,i=!1):(r=!1,i=!1);if(ae){const re=C(),le=P&&P(),Z=a&&a();re&&K(O,G(re[0],re[1],ae)),le&&K(O,z(le[0],ae)),Z&&K(O,j(Z[0],ae))}return H(O),O},M]},Ms=(n,t,o,s)=>{const r="--os-viewport-percent",i="--os-scroll-percent",a="--os-scroll-direction",{U:c}=Be(),{scrollbars:l}=c(),{slot:d}=l,{vt:m,ht:u,ot:f,Mt:v,gt:_,wt:D,nt:p}=t,{scrollbars:y}=v?{}:n,{slot:N}=y||{},B=[],k=[],b=[],x=jo([m,u,f],()=>p&&D?m:u,d,N),F=g=>{if(bt){const C=new bt({source:_,axis:g});return{kt:V=>{const h=V.Tt.animate({clear:["left"],[i]:[0,1]},{timeline:C});return()=>h.cancel()}}}},M={x:F("x"),y:F("y")},E=()=>{const{Rt:g,Vt:C}=o,S=(V,h)=>Eo(0,1,V/(V+h)||0);return{x:S(C.x,g.x),y:S(C.y,g.y)}},w=(g,C,S)=>{const V=S?xn:No;Y(g,h=>{V(h.Tt,C)})},$=(g,C)=>{Y(g,S=>{const[V,h]=C(S);at(V,h)})},A=(g,C,S)=>{const V=wn(S),h=V?S:!0,T=V?!S:!0;h&&w(k,g,C),T&&w(b,g,C)},H=()=>{const g=E(),C=S=>V=>[V.Tt,{[r]:cn(S)+""}];$(k,C(g.x)),$(b,C(g.y))},z=()=>{if(!bt){const{Lt:g}=o,C=Pn(g,he(_)),S=V=>h=>[h.Tt,{[i]:cn(V)+""}];$(k,S(C.x)),$(b,S(C.y))}},q=()=>{const{Lt:g}=o,C=qn(g),S=V=>h=>[h.Tt,{[a]:V?"0":"1"}];$(k,S(C.x)),$(b,S(C.y))},j=()=>{if(p&&!D){const{Rt:g,Lt:C}=o,S=qn(C),V=Pn(C,he(_)),h=T=>{const{Tt:L}=T,O=lt(L)===f&&L,I=(X,se,te)=>{const ce=se*X;return Do(te?ce:-ce)};return[O,O&&{transform:Kr({x:I(V.x,g.x,S.x),y:I(V.y,g.y,S.y)})}]};$(k,h),$(b,h)}},G=g=>{const C=g?"x":"y",V=Ye(`${ke} ${g?us:ms}`),h=Ye(zo),T=Ye($n),L={Tt:V,Ut:h,Pt:T},O=M[C];return oe(g?k:b,L),oe(B,[_e(V,h),_e(h,T),R(Ze,V),O&&O.kt(L),s(L,A,g)]),L},W=R(G,!0),P=R(G,!1),ee=()=>(_e(x,k[0].Tt),_e(x,b[0].Tt),R(ge,B));return W(),P(),[{Nt:H,qt:z,Bt:q,Ft:j,jt:A,Xt:{Yt:k,Wt:W,Jt:R($,k)},Gt:{Yt:b,Wt:P,Jt:R($,b)}},ee]},As=(n,t,o,s)=>(r,i,a)=>{const{ht:c,ot:l,nt:d,gt:m,Kt:u,Ot:f}=t,{Tt:v,Ut:_,Pt:D}=r,[p,y]=Ke(333),[N,B]=Ke(444),k=F=>{we(m.scrollBy)&&m.scrollBy({behavior:"smooth",left:F.x,top:F.y})},b=()=>{const F="pointerup pointercancel lostpointercapture",M=`client${a?"X":"Y"}`,E=a?Ot:Rt,w=a?"left":"top",$=a?"w":"h",A=a?"x":"y",H=(q,j)=>G=>{const{Rt:W}=o,P=Xe(_)[$]-Xe(D)[$],g=j*G/P*W[A];Ve(m,{[A]:q+g})},z=[];return Q(_,"pointerdown",q=>{const j=We(q.target,`.${$n}`)===D,G=j?D:_,W=n.scrollbars,P=W[j?"dragScroll":"clickScroll"],{button:ee,isPrimary:g,pointerType:C}=q,{pointers:S}=W;if(ee===0&&g&&P&&(S||[]).includes(C)){ge(z),B();const h=!j&&(q.shiftKey||P==="instant"),T=R(Yt,D),L=R(Yt,_),O=(ne,ie)=>(ne||T())[w]-(ie||L())[w],I=en(Yt(m)[E])/Xe(m)[$]||1,X=H(he(m)[A],1/I),se=q[M],te=T(),ce=L(),U=te[E],de=O(te,ce)+U/2,me=se-ce[w],ae=j?0:me-de,ue=ne=>{ge(Z),G.releasePointerCapture(ne.pointerId)},re=j||h,le=f(),Z=[Q(u,F,ue),Q(u,"selectstart",ne=>un(ne),{H:!1}),Q(_,F,ue),re&&Q(_,"pointermove",ne=>X(ae+(ne[M]-se))),re&&(()=>{const ne=he(m);le();const ie=he(m),fe={x:ie.x-ne.x,y:ie.y-ne.y};(St(fe.x)>3||St(fe.y)>3)&&(f(),Ve(m,ne),k(fe),N(le))})];if(G.setPointerCapture(q.pointerId),h)X(ae);else if(!j){const ne=ct($s);if(ne){const ie=ne(X,ae,U,fe=>{fe?le():oe(Z,le)});oe(Z,ie),oe(z,R(ie,!0))}}}})};let x=!0;return R(ge,[Q(D,"pointermove pointerleave",s),Q(v,"pointerenter",()=>{i(Zn,!0)}),Q(v,"pointerleave pointercancel",()=>{i(Zn,!1)}),!d&&Q(v,"mousedown",()=>{const F=an();(zn(F,Me)||zn(F,He)||F===document.body)&&Nt(R(mn,l),25)}),Q(v,"wheel",F=>{const{deltaX:M,deltaY:E,deltaMode:w}=F;x&&w===0&&lt(v)===c&&k({x:M,y:E}),x=!1,i(to,!0),p(()=>{x=!0,i(to)}),un(F)},{H:!1,I:!0}),Q(v,"pointerdown",R(Q,u,"click",Lo,{A:!0,I:!0,H:!1}),{I:!0}),b(),y,B])},Ls=(n,t,o,s,r,i)=>{let a,c,l,d,m,u=je,f=0;const v=g=>g.pointerType==="mouse",[_,D]=Ke(),[p,y]=Ke(100),[N,B]=Ke(100),[k,b]=Ke(()=>f),[x,F]=Ms(n,r,s,As(t,r,s,g=>v(g)&&G())),{ht:M,Qt:E,wt:w}=r,{jt:$,Nt:A,qt:H,Bt:z,Ft:q}=x,j=(g,C)=>{if(b(),g)$(eo);else{const S=R($,eo,!0);f>0&&!C?k(S):S()}},G=()=>{(l?!a:!d)&&(j(!0),p(()=>{j(!1)}))},W=g=>{$(pn,g,!0),$(pn,g,!1)},P=g=>{v(g)&&(a=l,l&&j(!0))},ee=[b,y,B,D,()=>u(),Q(M,"pointerover",P,{A:!0}),Q(M,"pointerenter",P),Q(M,"pointerleave",g=>{v(g)&&(a=!1,l&&j(!1))}),Q(M,"pointermove",g=>{v(g)&&c&&G()}),Q(E,"scroll",g=>{_(()=>{H(),G()}),i(g),q()})];return[()=>R(ge,oe(ee,F())),({It:g,Dt:C,Zt:S,tn:V})=>{const{nn:h,sn:T,en:L,cn:O}=V||{},{Ct:I,dt:X}=S||{},{ct:se}=o,{k:te}=Be(),{K:ce,rn:U}=s,[de,me]=g("showNativeOverlaidScrollbars"),[ae,ue]=g("scrollbars.theme"),[re,le]=g("scrollbars.visibility"),[Z,ne]=g("scrollbars.autoHide"),[ie,fe]=g("scrollbars.autoHideSuspend"),[tt]=g("scrollbars.autoHideDelay"),[dt,ut]=g("scrollbars.dragScroll"),[mt,Ue]=g("scrollbars.clickScroll"),[Pe,jt]=g("overflow"),qt=X&&!C,Pt=U.x||U.y,Gt=h||T||O||I||C,ye=L||le||jt,Kt=de&&te.x&&te.y,nt=(ot,Fe,ft)=>{const rt=ot.includes(Je)&&(re===Re||re==="auto"&&Fe===Je);return $(fs,rt,ft),rt};if(f=tt,qt&&(ie&&Pt?(W(!1),u(),N(()=>{u=Q(E,"scroll",R(W,!0),{A:!0})})):W(!0)),me&&$(cs,Kt),ue&&($(m),$(ae,!0),m=ae),fe&&!ie&&W(!0),ne&&(c=Z==="move",l=Z==="leave",d=Z==="never",j(d,!0)),ut&&$(_s,dt),Ue&&$(ps,!!mt),ye){const ot=nt(Pe.x,ce.x,!0),Fe=nt(Pe.y,ce.y,!1);$(vs,!(ot&&Fe))}Gt&&(H(),A(),q(),O&&z(),$(Qn,!U.x,!0),$(Qn,!U.y,!1),$(ds,se&&!w))},{},x]},Fs=n=>{const t=Be(),{U:o,R:s}=t,{elements:r}=o(),{padding:i,viewport:a,content:c}=r,l=$t(n),d=l?{}:n,{elements:m}=d,{padding:u,viewport:f,content:v}=m||{},_=l?n:d.target,D=Bo(_),p=_.ownerDocument,y=p.documentElement,N=()=>p.defaultView||ve,B=R(ws,[_]),k=R(jo,[_]),b=R(Ye,""),x=R(B,b,a),F=R(k,b,c),M=U=>{const de=Xe(U),me=Tt(U),ae=Ae(U,go),ue=Ae(U,ko);return me.w-de.w>0&&!Qe(ae)||me.h-de.h>0&&!Qe(ue)},E=x(f),w=E===_,$=w&&D,A=!w&&F(v),H=!w&&E===A,z=$?y:E,q=$?z:_,j=!w&&k(b,i,u),G=!H&&A,W=[G,z,j,q].map(U=>$t(U)&&!lt(U)&&U),P=U=>U&&co(W,U),ee=!P(z)&&M(z)?z:_,g=$?y:z,S={vt:_,ht:q,ot:z,ln:j,bt:G,gt:g,Qt:$?p:z,an:D?y:ee,Kt:p,wt:D,Mt:l,nt:w,un:N,yt:U=>Nn(z,Me,U),St:(U,de)=>Dt(z,Me,U,de),Ot:()=>Dt(g,Me,rs,!0)},{vt:V,ht:h,ln:T,ot:L,bt:O}=S,I=[()=>{Ee(h,[He,Xt]),Ee(V,Xt),D&&Ee(y,[Xt,He])}];let X=ln([O,L,T,h,V].find(U=>U&&!P(U)));const se=$?V:O||L,te=R(ge,I);return[S,()=>{const U=N(),de=an(),me=Z=>{_e(lt(Z),ln(Z)),Ze(Z)},ae=Z=>Q(Z,"focusin focusout focus blur",Lo,{I:!0,H:!1}),ue="tabindex",re=Vn(L,ue),le=ae(de);return Te(h,He,w?"":es),Te(T,vn,""),Te(L,Me,""),Te(O,Jn,""),w||(Te(L,ue,re||"-1"),D&&Te(y,Xn,"")),_e(se,X),_e(h,T),_e(T||h,!w&&L),_e(L,O),oe(I,[le,()=>{const Z=an(),ne=P(L),ie=ne&&Z===L?V:Z,fe=ae(ie);Ee(T,vn),Ee(O,Jn),Ee(L,Me),D&&Ee(y,Xn),re?Te(L,ue,re):Ee(L,ue),P(O)&&me(O),ne&&me(L),P(T)&&me(T),mn(ie),fe()}]),s&&!w&&(Sn(L,Me,Ho),oe(I,R(Ee,L,Me))),mn(!w&&D&&de===V&&U.top===U?L:de),le(),X=0,te},te]},Os=({bt:n})=>({Zt:t,_n:o,Dt:s})=>{const{xt:r}=t||{},{$t:i}=o;n&&(r||s)&&at(n,{[Rt]:i&&"100%"})},Rs=({ht:n,ln:t,ot:o,nt:s},r)=>{const[i,a]=pe({i:qr,o:In()},R(In,n,"padding",""));return({It:c,Zt:l,_n:d,Dt:m})=>{let[u,f]=a(m);const{R:v}=Be(),{ft:_,Ht:D,Ct:p}=l||{},{ct:y}=d,[N,B]=c("paddingAbsolute");(_||f||(m||D))&&([u,f]=i(m));const b=!s&&(B||p||f);if(b){const x=!N||!t&&!v,F=u.r+u.l,M=u.t+u.b,E={[_o]:x&&!y?-F:0,[ho]:x?-M:0,[po]:x&&y?-F:0,top:x?-u.t:0,right:x?y?-u.r:"auto":0,left:x?y?"auto":-u.l:0,[Ot]:x&&`calc(100% + ${F}px)`},w={[uo]:x?u.t:0,[mo]:x?u.r:0,[vo]:x?u.b:0,[fo]:x?u.l:0};at(t||o,E),at(o,w),K(r,{ln:u,dn:!x,rt:t?w:K({},E,w)})}return{fn:b}}},Hs=(n,t)=>{const o=Be(),{ht:s,ln:r,ot:i,nt:a,Qt:c,gt:l,wt:d,St:m,un:u}=n,{R:f}=o,v=d&&a,_=R(ao,0),D={display:()=>!1,direction:C=>C!=="ltr",flexDirection:C=>C.endsWith("-reverse"),writingMode:C=>C!=="horizontal-tb"},p=be(D),y={i:wo,o:{w:0,h:0}},N={i:yt,o:{}},B=C=>{m(Ro,!v&&C)},k=C=>{if(!p.some(se=>{const te=C[se];return te&&D[se](te)}))return{D:{x:0,y:0},M:{x:1,y:1}};B(!0);const V=he(l),h=m(ss,!0),T=Q(c,Je,se=>{const te=he(l);se.isTrusted&&te.x===V.x&&te.y===V.y&&Ao(se)},{I:!0,A:!0});Ve(l,{x:0,y:0}),h();const L=he(l),O=Tt(l);Ve(l,{x:O.w,y:O.h});const I=he(l);Ve(l,{x:I.x-L.x<1&&-O.w,y:I.y-L.y<1&&-O.h});const X=he(l);return Ve(l,V),gn(()=>T()),{D:L,M:X}},b=(C,S)=>{const V=ve.devicePixelRatio%1!==0?1:0,h={w:_(C.w-S.w),h:_(C.h-S.h)};return{w:h.w>V?h.w:0,h:h.h>V?h.h:0}},[x,F]=pe(y,R(Bn,i)),[M,E]=pe(y,R(Tt,i)),[w,$]=pe(y),[A]=pe(N),[H,z]=pe(y),[q]=pe(N),[j]=pe({i:(C,S)=>Ht(C,S,p),o:{}},()=>Jr(i)?Ae(i,p):{}),[G,W]=pe({i:(C,S)=>yt(C.D,S.D)&&yt(C.M,S.M),o:Fo()}),P=ct(Wo),ee=(C,S)=>`${S?ts:ns}${jr(C)}`,g=C=>{const S=h=>[Re,Ie,Je].map(T=>ee(T,h)),V=S(!0).concat(S()).join(" ");m(V),m(be(C).map(h=>ee(C[h],h==="x")).join(" "),!0)};return({It:C,Zt:S,_n:V,Dt:h},{fn:T})=>{const{ft:L,Ht:O,Ct:I,dt:X,zt:se}=S||{},te=P&&P.tt(n,t,V,o,C),{it:ce,ut:U,_t:de}=te||{},[me,ae]=Bs(C,o),[ue,re]=C("overflow"),le=Qe(ue.x),Z=Qe(ue.y),ne=!0;let ie=F(h),fe=E(h),tt=$(h),dt=z(h);ae&&f&&m(Ho,!me);{Nn(s,He,Vt)&&B(!0);const[Ln]=U?U():[],[vt]=ie=x(h),[pt]=fe=M(h),_t=To(i),ht=v&&Xr(u()),br={w:_(pt.w+vt.w),h:_(pt.h+vt.h)},Fn={w:_((ht?ht.w:_t.w+_(_t.w-pt.w))+vt.w),h:_((ht?ht.h:_t.h+_(_t.h-pt.h))+vt.h)};Ln&&Ln(),dt=H(Fn),tt=w(b(br,Fn),h)}const[ut,mt]=dt,[Ue,Pe]=tt,[jt,qt]=fe,[Pt,Gt]=ie,[ye,Kt]=A({x:Ue.w>0,y:Ue.h>0}),nt=le&&Z&&(ye.x||ye.y)||le&&ye.x&&!ye.y||Z&&ye.y&&!ye.x,ot=T||I||se||Gt||qt||mt||Pe||re||ae||ne,Fe=Cs(ye,ue),[ft,rt]=q(Fe.K),[hr,gr]=j(h),An=I||X||gr||Kt||h,[kr,wr]=An?G(k(hr),h):W();return ot&&(rt&&g(Fe.K),de&&ce&&at(i,de(Fe,V,ce(Fe,jt,Pt)))),B(!1),Dt(s,He,Vt,nt),Dt(r,vn,Vt,nt),K(t,{K:ft,Vt:{x:ut.w,y:ut.h},Rt:{x:Ue.w,y:Ue.h},rn:ye,Lt:Zr(kr,Ue)}),{en:rt,nn:mt,sn:Pe,cn:wr||Pe,vn:An}}},zs=n=>{const[t,o,s]=Fs(n),r={ln:{t:0,r:0,b:0,l:0},dn:!1,rt:{[_o]:0,[ho]:0,[po]:0,[uo]:0,[mo]:0,[vo]:0,[fo]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},K:{x:Ie,y:Ie},rn:{x:!1,y:!1},Lt:Fo()},{vt:i,gt:a,nt:c,Ot:l}=t,{R:d,k:m}=Be(),u=!d&&(m.x||m.y),f=[Os(t),Rs(t,r),Hs(t,r)];return[o,v=>{const _={},p=u&&he(a),y=p&&l();return Y(f,N=>{K(_,N(v,_)||{})}),Ve(a,p),y&&y(),!c&&Ve(i,0),_},r,t,s]},Us=(n,t,o,s,r)=>{let i=!1;const a=Yn(t,{}),[c,l,d,m,u]=zs(n),[f,v,_]=Ts(m,d,a,k=>{B({},k)}),[D,p,,y]=Ls(n,t,_,d,m,r),N=k=>be(k).some(b=>!!k[b]),B=(k,b)=>{if(o())return!1;const{pn:x,Dt:F,At:M,hn:E}=k,w=x||{},$=!!F||!i,A={It:Yn(t,w,$),pn:w,Dt:$};if(E)return p(A),!1;const H=b||v(K({},A,{At:M})),z=l(K({},A,{_n:_,Zt:H}));p(K({},A,{Zt:H,tn:z}));const q=N(H),j=N(z),G=q||j||!En(w)||$;return i=!0,G&&s(k,{Zt:H,tn:z}),G};return[()=>{const{an:k,gt:b,Ot:x}=m,F=he(k),M=[f(),c(),D()],E=x();return Ve(b,F),E(),R(ge,M)},B,()=>({gn:_,bn:d}),{wn:m,yn:y},u]},xe=(n,t,o)=>{const{N:s}=Be(),r=$t(n),i=r?n:n.target,a=qo(i);if(t&&!a){let c=!1;const l=[],d={},m=w=>{const $=yo(w),A=ct(Ns);return A?A($,!0):$},u=K({},s(),m(t)),[f,v,_]=fn(),[D,p,y]=fn(o),N=(w,$)=>{y(w,$),_(w,$)},[B,k,b,x,F]=Us(n,u,()=>c,({pn:w,Dt:$},{Zt:A,tn:H})=>{const{ft:z,Ct:q,xt:j,Ht:G,Et:W,dt:P}=A,{nn:ee,sn:g,en:C,cn:S}=H;N("updated",[E,{updateHints:{sizeChanged:!!z,directionChanged:!!q,heightIntrinsicChanged:!!j,overflowEdgeChanged:!!ee,overflowAmountChanged:!!g,overflowStyleChanged:!!C,scrollCoordinatesChanged:!!S,contentMutation:!!G,hostMutation:!!W,appear:!!P},changedOptions:w||{},force:!!$}])},w=>N("scroll",[E,w])),M=w=>{Es(i),ge(l),c=!0,N("destroyed",[E,w]),v(),p()},E={options(w,$){if(w){const A=$?s():{},H=Oo(u,K(A,m(w)));En(H)||(K(u,H),k({pn:H}))}return K({},u)},on:D,off:(w,$)=>{w&&$&&p(w,$)},state(){const{gn:w,bn:$}=b(),{ct:A}=w,{Vt:H,Rt:z,K:q,rn:j,ln:G,dn:W,Lt:P}=$;return K({},{overflowEdge:H,overflowAmount:z,overflowStyle:q,hasOverflow:j,scrollCoordinates:{start:P.D,end:P.M},padding:G,paddingAbsolute:W,directionRTL:A,destroyed:c})},elements(){const{vt:w,ht:$,ln:A,ot:H,bt:z,gt:q,Qt:j}=x.wn,{Xt:G,Gt:W}=x.yn,P=g=>{const{Pt:C,Ut:S,Tt:V}=g;return{scrollbar:V,track:S,handle:C}},ee=g=>{const{Yt:C,Wt:S}=g,V=P(C[0]);return K({},V,{clone:()=>{const h=P(S());return k({hn:!0}),h}})};return K({},{target:w,host:$,padding:A||H,viewport:H,content:z||H,scrollOffsetElement:q,scrollEventElement:j,scrollbarHorizontal:ee(G),scrollbarVertical:ee(W)})},update:w=>k({Dt:w,At:!0}),destroy:R(M,!1),plugin:w=>d[be(w)[0]]};return oe(l,[F]),ys(i,E),Ko(Po,xe,[E,f,d]),bs(x.wn.wt,!r&&n.cancel)?(M(!0),E):(oe(l,B()),N("initialized",[E]),E.update(),E)}return a};xe.plugin=n=>{const t=Ne(n),o=t?n:[n],s=o.map(r=>Ko(r,xe)[0]);return Ss(o),t?s:s[0]};xe.valid=n=>{const t=n&&n.elements,o=we(t)&&t();return Ct(o)&&!!qo(o.target)};xe.env=()=>{const{T:n,k:t,R:o,V:s,B:r,F:i,U:a,P:c,N:l,q:d}=Be();return K({},{scrollbarsSize:n,scrollbarsOverlaid:t,scrollbarsHiding:o,scrollTimeline:s,staticDefaultInitialization:r,staticDefaultOptions:i,getDefaultInitialization:a,setDefaultInitialization:c,getDefaultOptions:l,setDefaultOptions:d})};xe.nonce=gs;function Is(){let n;const t=e.ref(null),o=Math.floor(Math.random()*2**32),s=e.ref(!1),r=e.ref([]),i=()=>r.value,a=()=>n.getSelection(),c=()=>r.value.length,l=()=>n.clearSelection(!0),d=e.ref(),m=e.ref(null),u=e.ref(null),f=e.ref(null),v=e.ref(null);function _(){n=new Sr({area:t.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),n.subscribe("DS:start:pre",({items:b,event:x,isDragging:F})=>{if(F)n.Interaction._reset(x);else{s.value=!1;const M=t.value.offsetWidth-x.offsetX,E=t.value.offsetHeight-x.offsetY;M<15&&E<15&&n.Interaction._reset(x),x.target.classList.contains("os-scrollbar-handle")&&n.Interaction._reset(x)}}),document.addEventListener("dragleave",b=>{!b.buttons&&s.value&&(s.value=!1)})}const D=()=>e.nextTick(()=>{n.addSelection(n.getSelectables()),p()}),p=()=>{r.value=n.getSelection().map(b=>JSON.parse(b.dataset.item)),d.value(r.value)},y=()=>e.nextTick(()=>{const b=i().map(x=>x.path);l(),n.setSettings({selectables:document.getElementsByClassName("vf-item-"+o)}),n.addSelection(n.getSelectables().filter(x=>b.includes(JSON.parse(x.dataset.item).path))),p(),B()}),N=b=>{d.value=b,n.subscribe("DS:end",({items:x,event:F,isDragging:M})=>{r.value=x.map(E=>JSON.parse(E.dataset.item)),b(x.map(E=>JSON.parse(E.dataset.item)))})},B=()=>{m.value&&(t.value.getBoundingClientRect().height<t.value.scrollHeight?(u.value.style.height=t.value.scrollHeight+"px",u.value.style.display="block"):(u.value.style.height="100%",u.value.style.display="none"))},k=b=>{if(!m.value)return;const{scrollOffsetElement:x}=m.value.elements();x.scrollTo({top:t.value.scrollTop,left:0})};return e.onMounted(()=>{xe(f.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"},plugins:{OverlayScrollbars:xe}},{initialized:b=>{m.value=b},scroll:(b,x)=>{const{scrollOffsetElement:F}=b.elements();t.value.scrollTo({top:F.scrollTop,left:0})}}),_(),B(),v.value=new ResizeObserver(B),v.value.observe(t.value),t.value.addEventListener("scroll",k),n.subscribe("DS:scroll",({isDragging:b})=>b||k())}),e.onUnmounted(()=>{n&&n.stop(),v.value&&v.value.disconnect()}),e.onUpdated(()=>{n&&n.Area.reset()}),{area:t,explorerId:o,isDraggingRef:s,scrollBar:u,scrollBarContainer:f,getSelected:i,getSelection:a,selectAll:D,clearSelection:l,refreshSelection:y,getCount:c,onSelect:N}}function js(n,t){const o=e.ref(n),s=e.ref(t),r=e.ref([]),i=e.ref([]),a=e.ref([]),c=e.ref(!1),l=e.ref(5);let d=!1,m=!1;const u=e.reactive({adapter:o,storages:[],dirname:s,files:[]});function f(){let N=[],B=[],k=s.value??o.value+"://";k.length===0&&(r.value=[]),k.replace(o.value+"://","").split("/").forEach(function(F){N.push(F),N.join("/")!==""&&B.push({basename:F,name:F,path:o.value+"://"+N.join("/"),type:"dir"})}),i.value=B;const[b,x]=_(B,l.value);a.value=x,r.value=b}function v(N){l.value=N,f()}function _(N,B){return N.length>B?[N.slice(-B),N.slice(0,-B)]:[N,[]]}function D(N=null){c.value=N??!c.value}function p(){return r.value&&r.value.length&&!m}const y=e.computed(()=>{var N;return((N=r.value[r.value.length-2])==null?void 0:N.path)??o.value+"://"});return e.onMounted(()=>{}),e.watch(s,f),e.onMounted(f),{adapter:o,path:s,loading:d,searchMode:m,data:u,breadcrumbs:r,breadcrumbItems:i,limitBreadcrumbItems:v,hiddenBreadcrumbs:a,showHiddenBreadcrumbs:c,toggleHiddenBreadcrumbs:D,isGoUpAvailable:p,parentFolderPath:y}}const qs=(n,t)=>{const o=Tr(n.id),s=Vr(),r=o.getStore("metricUnits",!1),i=Rr(o,n.theme),a=t.i18n,c=n.locale??t.locale,l=o.getStore("adapter"),d=f=>Array.isArray(f)?f:Lr,m=o.getStore("persist-path",n.persist),u=m?o.getStore("path",n.path):n.path;return e.reactive({version:Fr,root:null,debug:n.debug,emitter:s,storage:o,i18n:Ar(o,c,s,a),modal:Hr(),dragSelect:e.computed(()=>Is()),requester:Dr(n.request),features:d(n.features),view:o.getStore("viewport","grid"),fullScreen:o.getStore("full-screen",n.fullScreen),showTreeView:o.getStore("show-tree-view",n.showTreeView),pinnedFolders:o.getStore("pinned-folders",n.pinnedFolders),treeViewData:[],selectButton:n.selectButton,maxFileSize:n.maxFileSize,theme:i,metricUnits:r,filesize:r?lo:so,compactListView:o.getStore("compact-list-view",!0),persist:m,showThumbnails:o.getStore("show-thumbnails",n.showThumbnails),fs:js(l,u)})},Ps={class:"vuefinder__modal-layout__container"},Gs={class:"vuefinder__modal-layout__content"},Ks={class:"vuefinder__modal-layout__footer"},Ce={__name:"ModalLayout",setup(n){const t=e.ref(null),o=e.inject("ServiceContainer");return e.onMounted(()=>{const s=document.querySelector(".v-f-modal input");s&&s.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768){const r=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:r,left:0,behavior:"smooth"})}})}),(s,r)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__modal-layout","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:r[1]||(r[1]=e.withKeys(i=>e.unref(o).modal.close(),["esc"])),tabindex:"0"},[r[2]||(r[2]=e.createElementVNode("div",{class:"vuefinder__modal-layout__overlay"},null,-1)),e.createElementVNode("div",Ps,[e.createElementVNode("div",{class:"vuefinder__modal-layout__wrapper",onMousedown:r[0]||(r[0]=e.withModifiers(i=>e.unref(o).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"vuefinder__modal-layout__body"},[e.createElementVNode("div",Gs,[e.renderSlot(s.$slots,"default")]),e.createElementVNode("div",Ks,[e.renderSlot(s.$slots,"buttons")])],512)],32)])],32))}},Xo=(n,t)=>{const o=n.__vccOpts||n;for(const[s,r]of t)o[s]=r;return o},Ws={props:{on:{type:String,required:!0}},setup(n,{emit:t,slots:o}){const s=e.inject("ServiceContainer"),r=e.ref(!1),{t:i}=s.i18n;let a=null;const c=()=>{clearTimeout(a),r.value=!0,a=setTimeout(()=>{r.value=!1},2e3)};return e.onMounted(()=>{s.emitter.on(n.on,c)}),e.onUnmounted(()=>{clearTimeout(a)}),{shown:r,t:i}}},Ys={key:1};function Xs(n,t,o,s,r,i){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__action-message",{"vuefinder__action-message--hidden":!s.shown}])},[n.$slots.default?e.renderSlot(n.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",Ys,e.toDisplayString(s.t("Saved.")),1))],2)}const Ge=Xo(Ws,[["render",Xs]]),Js={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Zs(n,t){return e.openBlock(),e.createElementBlock("svg",Js,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87q.11.06.22.127c.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a8 8 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a7 7 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a7 7 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a7 7 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124q.108-.066.22-.128c.332-.183.582-.495.644-.869z"},null,-1),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},null,-1)]))}const Qs={render:Zs},el={class:"vuefinder__modal-header"},tl={class:"vuefinder__modal-header__icon-container"},nl={class:"vuefinder__modal-header__title",id:"modal-title"},Le={__name:"ModalHeader",props:{title:{type:String,required:!0},icon:{type:Object,required:!0}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",el,[e.createElementVNode("div",tl,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.icon),{class:"vuefinder__modal-header__icon"}))]),e.createElementVNode("h3",nl,e.toDisplayString(n.title),1)]))}},ol={class:"vuefinder__about-modal__content"},rl={class:"vuefinder__about-modal__main"},sl={class:"vuefinder__about-modal__tabs","aria-label":"Tabs"},ll=["onClick","aria-current"],al={key:0,class:"vuefinder__about-modal__tab-content"},il={class:"vuefinder__about-modal__description"},cl={href:"https://vuefinder.ozdemir.be",class:"vuefinder__about-modal__link",target:"_blank"},dl={href:"https://github.com/n1crack/vuefinder",class:"vuefinder__about-modal__link",target:"_blank"},ul={key:1,class:"vuefinder__about-modal__tab-content"},ml={class:"vuefinder__about-modal__description"},fl={class:"vuefinder__about-modal__settings"},vl={class:"vuefinder__about-modal__setting flex"},pl={class:"vuefinder__about-modal__setting-input"},_l={class:"vuefinder__about-modal__setting-label"},hl={for:"metric_unit",class:"vuefinder__about-modal__label"},gl={class:"vuefinder__about-modal__setting flex"},kl={class:"vuefinder__about-modal__setting-input"},wl={class:"vuefinder__about-modal__setting-label"},bl={for:"large_icons",class:"vuefinder__about-modal__label"},yl={class:"vuefinder__about-modal__setting flex"},El={class:"vuefinder__about-modal__setting-input"},Vl={class:"vuefinder__about-modal__setting-label"},Sl={for:"persist_path",class:"vuefinder__about-modal__label"},Nl={class:"vuefinder__about-modal__setting flex"},xl={class:"vuefinder__about-modal__setting-input"},Bl={class:"vuefinder__about-modal__setting-label"},Cl={for:"show_thumbnails",class:"vuefinder__about-modal__label"},$l={class:"vuefinder__about-modal__setting"},Dl={class:"vuefinder__about-modal__setting-input"},Tl={for:"theme",class:"vuefinder__about-modal__label"},Ml={class:"vuefinder__about-modal__setting-label"},Al=["label"],Ll=["value"],Fl={key:0,class:"vuefinder__about-modal__setting"},Ol={class:"vuefinder__about-modal__setting-input"},Rl={for:"language",class:"vuefinder__about-modal__label"},Hl={class:"vuefinder__about-modal__setting-label"},zl=["label"],Ul=["value"],Il={key:2,class:"vuefinder__about-modal__tab-content"},jl={class:"vuefinder__about-modal__shortcuts"},ql={class:"vuefinder__about-modal__shortcut"},Pl={class:"vuefinder__about-modal__shortcut"},Gl={class:"vuefinder__about-modal__shortcut"},Kl={class:"vuefinder__about-modal__shortcut"},Wl={class:"vuefinder__about-modal__shortcut"},Yl={class:"vuefinder__about-modal__shortcut"},Xl={class:"vuefinder__about-modal__shortcut"},Jl={class:"vuefinder__about-modal__shortcut"},Zl={class:"vuefinder__about-modal__shortcut"},Ql={key:3,class:"vuefinder__about-modal__tab-content"},ea={class:"vuefinder__about-modal__description"},Jo={__name:"ModalAbout",setup(n){const t=e.inject("ServiceContainer"),{setStore:o,clearStore:s}=t.storage,{t:r}=t.i18n,i={ABOUT:"about",SETTINGS:"settings",SHORTCUTS:"shortcuts",RESET:"reset"},a=e.computed(()=>[{name:r("About"),key:i.ABOUT},{name:r("Settings"),key:i.SETTINGS},{name:r("Shortcuts"),key:i.SHORTCUTS},{name:r("Reset"),key:i.RESET}]),c=e.ref("about"),l=async()=>{s(),location.reload()},d=N=>{t.theme.set(N),t.emitter.emit("vf-theme-saved")},m=()=>{t.metricUnits=!t.metricUnits,t.filesize=t.metricUnits?lo:so,o("metricUnits",t.metricUnits),t.emitter.emit("vf-metric-units-saved")},u=()=>{t.compactListView=!t.compactListView,o("compactListView",t.compactListView),t.emitter.emit("vf-compact-view-saved")},f=()=>{t.showThumbnails=!t.showThumbnails,o("show-thumbnails",t.showThumbnails),t.emitter.emit("vf-show-thumbnails-saved")},v=()=>{t.persist=!t.persist,o("persist-path",t.persist),t.emitter.emit("vf-persist-path-saved")},{i18n:_}=e.inject("VueFinderOptions"),p=Object.fromEntries(Object.entries({en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([N])=>Object.keys(_).includes(N))),y=e.computed(()=>({system:r("System"),light:r("Light"),dark:r("Dark")}));return(N,B)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:B[7]||(B[7]=k=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",ol,[e.createVNode(Le,{icon:e.unref(Qs),title:"Vuefinder "+e.unref(t).version},null,8,["icon","title"]),e.createElementVNode("div",rl,[e.createElementVNode("div",null,[e.createElementVNode("div",null,[e.createElementVNode("nav",sl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,k=>(e.openBlock(),e.createElementBlock("button",{key:k.name,onClick:b=>c.value=k.key,class:e.normalizeClass([k.key===c.value?"vuefinder__about-modal__tab--active":"vuefinder__about-modal__tab--inactive","vuefinder__about-modal__tab"]),"aria-current":k.current?"page":void 0},e.toDisplayString(k.name),11,ll))),128))])])]),c.value===i.ABOUT?(e.openBlock(),e.createElementBlock("div",al,[e.createElementVNode("div",il,e.toDisplayString(e.unref(r)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),e.createElementVNode("a",cl,e.toDisplayString(e.unref(r)("Project home")),1),e.createElementVNode("a",dl,e.toDisplayString(e.unref(r)("Follow on GitHub")),1)])):e.createCommentVNode("",!0),c.value===i.SETTINGS?(e.openBlock(),e.createElementBlock("div",ul,[e.createElementVNode("div",ml,e.toDisplayString(e.unref(r)("Customize your experience with the following settings")),1),e.createElementVNode("div",fl,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",vl,[e.createElementVNode("div",pl,[e.withDirectives(e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox","onUpdate:modelValue":B[0]||(B[0]=k=>e.unref(t).metricUnits=k),onClick:m,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(t).metricUnits]])]),e.createElementVNode("div",_l,[e.createElementVNode("label",hl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Use Metric Units"))+" ",1),e.createVNode(Ge,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",gl,[e.createElementVNode("div",kl,[e.withDirectives(e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox","onUpdate:modelValue":B[1]||(B[1]=k=>e.unref(t).compactListView=k),onClick:u,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(t).compactListView]])]),e.createElementVNode("div",wl,[e.createElementVNode("label",bl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Compact list view"))+" ",1),e.createVNode(Ge,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",yl,[e.createElementVNode("div",El,[e.withDirectives(e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox","onUpdate:modelValue":B[2]||(B[2]=k=>e.unref(t).persist=k),onClick:v,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(t).persist]])]),e.createElementVNode("div",Vl,[e.createElementVNode("label",Sl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Persist path on reload"))+" ",1),e.createVNode(Ge,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Nl,[e.createElementVNode("div",xl,[e.withDirectives(e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox","onUpdate:modelValue":B[3]||(B[3]=k=>e.unref(t).showThumbnails=k),onClick:f,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(t).showThumbnails]])]),e.createElementVNode("div",Bl,[e.createElementVNode("label",Cl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Show thumbnails"))+" ",1),e.createVNode(Ge,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",$l,[e.createElementVNode("div",Dl,[e.createElementVNode("label",Tl,e.toDisplayString(e.unref(r)("Theme")),1)]),e.createElementVNode("div",Ml,[e.withDirectives(e.createElementVNode("select",{id:"theme","onUpdate:modelValue":B[4]||(B[4]=k=>e.unref(t).theme.value=k),onChange:B[5]||(B[5]=k=>d(k.target.value)),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(r)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,(k,b)=>(e.openBlock(),e.createElementBlock("option",{value:b},e.toDisplayString(k),9,Ll))),256))],8,Al)],544),[[e.vModelSelect,e.unref(t).theme.value]]),e.createVNode(Ge,{class:"ms-3",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(J).LANGUAGE)&&Object.keys(e.unref(p)).length>1?(e.openBlock(),e.createElementBlock("div",Fl,[e.createElementVNode("div",Ol,[e.createElementVNode("label",Rl,e.toDisplayString(e.unref(r)("Language")),1)]),e.createElementVNode("div",Hl,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":B[6]||(B[6]=k=>e.unref(t).i18n.locale=k),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(r)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(p),(k,b)=>(e.openBlock(),e.createElementBlock("option",{value:b},e.toDisplayString(k),9,Ul))),256))],8,zl)],512),[[e.vModelSelect,e.unref(t).i18n.locale]]),e.createVNode(Ge,{class:"ms-3",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0)])])])):e.createCommentVNode("",!0),c.value===i.SHORTCUTS?(e.openBlock(),e.createElementBlock("div",Il,[e.createElementVNode("div",jl,[e.createElementVNode("div",ql,[e.createElementVNode("div",null,e.toDisplayString(e.unref(r)("Rename")),1),B[8]||(B[8]=e.createElementVNode("kbd",null,"F2",-1))]),e.createElementVNode("div",Pl,[e.createElementVNode("div",null,e.toDisplayString(e.unref(r)("Refresh")),1),B[9]||(B[9]=e.createElementVNode("kbd",null,"F5",-1))]),e.createElementVNode("div",Gl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Delete"))+" ",1),B[10]||(B[10]=e.createElementVNode("kbd",null,"Del",-1))]),e.createElementVNode("div",Kl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Escape"))+" ",1),B[11]||(B[11]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Esc")],-1))]),e.createElementVNode("div",Wl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Select All"))+" ",1),B[12]||(B[12]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"A")],-1))]),e.createElementVNode("div",Yl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Search"))+" ",1),B[13]||(B[13]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"F")],-1))]),e.createElementVNode("div",Xl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Toggle Sidebar"))+" ",1),B[14]||(B[14]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"E")],-1))]),e.createElementVNode("div",Jl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Open Settings"))+" ",1),B[15]||(B[15]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,",")],-1))]),e.createElementVNode("div",Zl,[e.createTextVNode(e.toDisplayString(e.unref(r)("Toggle Full Screen"))+" ",1),B[16]||(B[16]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"Enter")],-1))])])])):e.createCommentVNode("",!0),c.value===i.RESET?(e.openBlock(),e.createElementBlock("div",Ql,[e.createElementVNode("div",ea,e.toDisplayString(e.unref(r)("Reset all settings to default")),1),e.createElementVNode("button",{onClick:l,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Reset Settings")),1)])):e.createCommentVNode("",!0)])])]),_:1}))}},ta=["title"],$e={__name:"Message",props:{error:{type:Boolean,default:!1}},emits:["hidden"],setup(n,{emit:t}){var d;const o=t,s=e.inject("ServiceContainer"),{t:r}=s.i18n,i=e.ref(!1),a=e.ref(null),c=e.ref((d=a.value)==null?void 0:d.strMessage);e.watch(c,()=>i.value=!1);const l=()=>{o("hidden"),i.value=!0};return(m,u)=>(e.openBlock(),e.createElementBlock("div",null,[i.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:a,class:e.normalizeClass(["vuefinder__message",n.error?"vuefinder__message--error":"vuefinder__message--success"])},[e.renderSlot(m.$slots,"default"),e.createElementVNode("div",{class:"vuefinder__message__close",onClick:l,title:e.unref(r)("Close")},u[0]||(u[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__message__icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ta)],2))]))}},na={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function oa(n,t){return e.openBlock(),e.createElementBlock("svg",na,t[0]||(t[0]=[e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1)]))}const Zo={render:oa},ra={class:"vuefinder__delete-modal__content"},sa={class:"vuefinder__delete-modal__form"},la={class:"vuefinder__delete-modal__description"},aa={class:"vuefinder__delete-modal__files vf-scrollbar"},ia={class:"vuefinder__delete-modal__file"},ca={key:0,class:"vuefinder__delete-modal__icon vuefinder__delete-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},da={key:1,class:"vuefinder__delete-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ua={class:"vuefinder__delete-modal__file-name"},ma={class:"vuefinder__delete-modal__warning"},Tn={__name:"ModalDelete",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(t.modal.data.items),r=e.ref(""),i=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map(({path:a,type:c})=>({path:a,type:c}))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("Files deleted.")})},onError:a=>{r.value=o(a.message)}})};return(a,c)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(o)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:c[1]||(c[1]=l=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",ma,e.toDisplayString(e.unref(o)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Le,{icon:e.unref(Zo),title:e.unref(o)("Delete files")},null,8,["icon","title"]),e.createElementVNode("div",ra,[e.createElementVNode("div",sa,[e.createElementVNode("p",la,e.toDisplayString(e.unref(o)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",aa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,l=>(e.openBlock(),e.createElementBlock("p",ia,[l.type==="dir"?(e.openBlock(),e.createElementBlock("svg",ca,c[2]||(c[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):(e.openBlock(),e.createElementBlock("svg",da,c[3]||(c[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e.createElementVNode("span",ua,e.toDisplayString(l.basename),1)]))),256))]),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:c[0]||(c[0]=l=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},fa={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function va(n,t){return e.openBlock(),e.createElementBlock("svg",fa,t[0]||(t[0]=[e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1)]))}const Qo={render:va},pa={class:"vuefinder__rename-modal__content"},_a={class:"vuefinder__rename-modal__item"},ha={class:"vuefinder__rename-modal__item-info"},ga={key:0,class:"vuefinder__rename-modal__icon vuefinder__rename-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ka={key:1,class:"vuefinder__rename-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},wa={class:"vuefinder__rename-modal__item-name"},Mt={__name:"ModalRename",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(t.modal.data.items[0]),r=e.ref(t.modal.data.items[0].basename),i=e.ref(""),a=()=>{r.value!=""&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:s.value.path,name:r.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is renamed.",r.value)})},onError:c=>{i.value=o(c.message)}})};return(c,l)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:l[2]||(l[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Le,{icon:e.unref(Qo),title:e.unref(o)("Rename")},null,8,["icon","title"]),e.createElementVNode("div",pa,[e.createElementVNode("div",_a,[e.createElementVNode("p",ha,[s.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",ga,l[3]||(l[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):(e.openBlock(),e.createElementBlock("svg",ka,l[4]||(l[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e.createElementVNode("span",wa,e.toDisplayString(s.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":l[0]||(l[0]=d=>r.value=d),onKeyup:e.withKeys(a,["enter"]),class:"vuefinder__rename-modal__input",placeholder:"Name",type:"text"},null,544),[[e.vModelText,r.value]]),i.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:l[1]||(l[1]=d=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},De={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",ENTER:"Enter",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF"};function ba(n){const t=o=>{o.code===De.ESCAPE&&(n.modal.close(),n.root.focus()),!n.modal.visible&&(n.fs.searchMode||(o.code===De.F2&&n.features.includes(J.RENAME)&&(n.dragSelect.getCount()!==1||n.modal.open(Mt,{items:n.dragSelect.getSelected()})),o.code===De.F5&&n.emitter.emit("vf-fetch",{params:{q:"index",adapter:n.fs.adapter,path:n.fs.data.dirname}}),o.code===De.DELETE&&(!n.dragSelect.getCount()||n.modal.open(Tn,{items:n.dragSelect.getSelected()})),o.metaKey&&o.code===De.BACKSLASH&&n.modal.open(Jo),o.metaKey&&o.code===De.KEY_F&&n.features.includes(J.SEARCH)&&(n.fs.searchMode=!0,o.preventDefault()),o.metaKey&&o.code===De.KEY_E&&(n.showTreeView=!n.showTreeView,n.storage.setStore("show-tree-view",n.showTreeView)),o.metaKey&&o.code===De.ENTER&&(n.fullScreen=!n.fullScreen,n.root.focus()),o.metaKey&&o.code===De.KEY_A&&(n.dragSelect.selectAll(),o.preventDefault())))};e.onMounted(()=>{n.root.addEventListener("keydown",t)})}const ya={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Ea(n,t){return e.openBlock(),e.createElementBlock("svg",ya,t[0]||(t[0]=[e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1)]))}const er={render:Ea},Va={class:"vuefinder__new-folder-modal__content"},Sa={class:"vuefinder__new-folder-modal__form"},Na={class:"vuefinder__new-folder-modal__description"},xa=["placeholder"],tr={__name:"ModalNewFolder",setup(n){const t=e.inject("ServiceContainer");t.storage;const{t:o}=t.i18n,s=e.ref(""),r=e.ref(""),i=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)})},onError:a=>{r.value=o(a.message)}})};return(a,c)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:c[2]||(c[2]=l=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Le,{icon:e.unref(er),title:e.unref(o)("New Folder")},null,8,["icon","title"]),e.createElementVNode("div",Va,[e.createElementVNode("div",Sa,[e.createElementVNode("p",Na,e.toDisplayString(e.unref(o)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c[0]||(c[0]=l=>s.value=l),onKeyup:e.withKeys(i,["enter"]),class:"vuefinder__new-folder-modal__input",placeholder:e.unref(o)("Folder Name"),type:"text"},null,40,xa),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:c[1]||(c[1]=l=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},Ba={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Ca(n,t){return e.openBlock(),e.createElementBlock("svg",Ba,t[0]||(t[0]=[e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1)]))}const nr={render:Ca},$a={class:"vuefinder__new-file-modal__content"},Da={class:"vuefinder__new-file-modal__form"},Ta={class:"vuefinder__new-file-modal__description"},Ma=["placeholder"],Aa={__name:"ModalNewFile",setup(n){const t=e.inject("ServiceContainer");t.storage;const{t:o}=t.i18n,s=e.ref(""),r=e.ref(""),i=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)})},onError:a=>{r.value=o(a.message)}})};return(a,c)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:c[2]||(c[2]=l=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Le,{icon:e.unref(nr),title:e.unref(o)("New File")},null,8,["icon","title"]),e.createElementVNode("div",$a,[e.createElementVNode("div",Da,[e.createElementVNode("p",Ta,e.toDisplayString(e.unref(o)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c[0]||(c[0]=l=>s.value=l),onKeyup:e.withKeys(i,["enter"]),class:"vuefinder__new-file-modal__input",placeholder:e.unref(o)("File Name"),type:"text"},null,40,Ma),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:c[1]||(c[1]=l=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}};function _n(n,t=14){let o=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return n.replace(new RegExp(o),"$2..$4")}const La={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Fa(n,t){return e.openBlock(),e.createElementBlock("svg",La,t[0]||(t[0]=[e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1)]))}const or={render:Fa},Oa={class:"vuefinder__upload-modal__content"},Ra={value:""},Ha=["value"],za={key:0,class:"pointer-events-none"},Ua={key:1,class:"pointer-events-none"},Ia=["disabled"],ja=["disabled"],qa={class:"vuefinder__upload-modal__file-list vf-scrollbar"},Pa=["textContent"],Ga={class:"vuefinder__upload-modal__file-info"},Ka={class:"vuefinder__upload-modal__file-name hidden md:block"},Wa={class:"vuefinder__upload-modal__file-name md:hidden"},Ya={key:0,class:"ml-auto"},Xa=["title","disabled","onClick"],Ja={key:0,class:"py-2"},Za=["disabled"],Qa={__name:"ModalUpload",setup(n,{expose:t}){let o="Default";const s=e.inject("ServiceContainer"),{t:r}=s.i18n,i=e.ref({prefix:"",suffix:"",dateFormat:"YYYY-MM-DD",includeTimestamp:!0,customFormatter:null}),a=g=>{i.value.includeTimestamp&&new Date().toISOString().split("T")[0]+"",g.substring(0,g.lastIndexOf("."));const C=g.substring(g.lastIndexOf("."));return i.value.customFormatter?i.value.customFormatter(g):`${o}${i.value.suffix}${C}`},c=r("uppy"),l={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10},d=e.ref({QUEUE_ENTRY_STATUS:l}),m=e.ref(null),u=e.ref(null),f=e.ref(null),v=e.ref(null),_=e.ref(null),D=e.ref(null),p=e.ref([]),y=e.ref(""),N=e.ref(!1),B=e.ref(!1),k=e.ref([]),b=e.ref("");let x;function F(g,C=null){const S=C||g.webkitRelativePath||g.name,V=a(S);x.addFile({name:V,type:g.type,data:g,source:"Local"})}async function M(){try{const S=btoa("noblecoder:Admin100%"),h=await(await fetch("http://pmra.test/api/document-types",{method:"GET",headers:{Authorization:`Basic ${S}`}})).json();k.value=h.results}catch(g){console.error("Error fetching document types:",g),y.value=r("Error fetching document types. Please try again.")}}e.watch(b,async g=>{g&&await E()});async function E(){try{const S=btoa("noblecoder:Admin100%");o=(await(await fetch(`http://pmra.test/api/generate-document-name?document_type=${b.value}`,{method:"GET",headers:{Authorization:`Basic ${S}`}})).json()).filename}catch(g){console.error("Error generating document name:",g),y.value=r("Error generating document name. Please try again.")}}function w(g){return p.value.findIndex(C=>C.id===g)}function $(g){switch(g.status){case l.DONE:return"text-green-600";case l.ERROR:return"text-red-600";case l.CANCELED:return"text-red-600";case l.PENDING:default:return""}}const A=g=>{switch(g.status){case l.DONE:return"✓";case l.ERROR:case l.CANCELED:return"!";case l.PENDING:default:return"..."}};function H(){v.value.click()}function z(){if(!(N.value||!b.value)){if(!p.value.filter(g=>g.status!==l.DONE).length){y.value=r("Please select file to upload first.");return}y.value="",x.retryAll(),x.upload()}}function q(){x.cancelAll({reason:"user"}),p.value.forEach(g=>{g.status!==l.DONE&&(g.status=l.CANCELED,g.statusName=r("Canceled"))}),N.value=!1}function j(g){N.value||(x.removeFile(g.id,"removed-by-user"),p.value.splice(w(g.id),1))}function G(g){if(!N.value){if(x.cancelAll({reason:"user"}),g){const C=[];p.value.forEach(S=>{S.status!==l.DONE&&C.push(S)}),p.value=[],C.forEach(S=>{F(S.originalFile,S.name)});return}p.value.splice(0)}}function W(){s.modal.close()}function P(){return s.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",adapter:s.fs.adapter,path:s.fs.data.dirname,document_type:b.value}})}return e.onMounted(async()=>{await M(),x=new Nr({debug:s.debug,restrictions:{maxFileSize:Or(s.maxFileSize)},locale:c,onBeforeFileAdded(V,h){if(h[V.id]!=null){const L=w(V.id);p.value[L].status===l.PENDING&&(y.value=x.i18n("noDuplicates",{fileName:V.name})),p.value=p.value.filter(O=>O.id!==V.id)}return p.value.push({id:V.id,name:V.name,size:s.filesize(V.size),status:l.PENDING,statusName:r("Pending upload"),percent:null,originalFile:V.data}),!0}}),x.use(xr,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0,getResponseError(V,h){let T;try{T=JSON.parse(V).message}catch{T=r("Cannot parse server response.")}return new Error(T)}}),(()=>{x.on("restriction-failed",(V,h)=>{const T=p.value[w(V.id)];j(T),y.value=h.message}),x.on("upload",()=>{const V=P();x.setMeta({...V.body});const h=x.getPlugin("XHRUpload");h.opts.method=V.method,h.opts.endpoint=V.url+"?"+new URLSearchParams(V.params),h.opts.headers=V.headers,delete V.headers["Content-Type"],N.value=!0,p.value.forEach(T=>{T.status!==l.DONE&&(T.percent=null,T.status=l.UPLOADING,T.statusName=r("Pending upload"))})}),x.on("upload-progress",(V,h)=>{const T=Math.floor(h.bytesUploaded/h.bytesTotal*100);p.value[w(V.id)].percent=`${T}%`}),x.on("upload-success",V=>{const h=p.value[w(V.id)];h.status=l.DONE,h.statusName=r("Done")}),x.on("upload-error",(V,h)=>{const T=p.value[w(V.id)];T.percent=null,T.status=l.ERROR,h.isNetworkError?T.statusName=r("Network Error, Unable establish connection to the server or interrupted."):T.statusName=h?h.message:r("Unknown Error")}),x.on("error",V=>{y.value=V.message,N.value=!1,s.emitter.emit("vf-fetch",{params:{q:"index",adapter:s.fs.adapter,path:s.fs.data.dirname},noCloseModal:!0})}),x.on("complete",()=>{N.value=!1,s.emitter.emit("vf-fetch",{params:{q:"index",adapter:s.fs.adapter,path:s.fs.data.dirname,document_type:b},noCloseModal:!0})})})(),v.value.addEventListener("click",()=>{u.value.click()}),_.value.addEventListener("click",()=>{f.value.click()}),D.value.addEventListener("dragover",V=>{V.preventDefault(),B.value=!0}),D.value.addEventListener("dragleave",V=>{V.preventDefault(),B.value=!1});function C(V,h){h.isFile&&h.file(T=>V(h,T)),h.isDirectory&&h.createReader().readEntries(T=>{T.forEach(L=>{C(V,L)})})}D.value.addEventListener("drop",V=>{V.preventDefault(),B.value=!1;const h=/^[/\\](.+)/;[...V.dataTransfer.items].forEach(T=>{T.kind==="file"&&C((L,O)=>{const I=h.exec(L.fullPath);I&&F(O,I[1])},T.webkitGetAsEntry())})});const S=({target:V})=>{const h=V.files;for(const T of h)F(T);V.value=""};u.value.addEventListener("change",S),f.value.addEventListener("change",S)}),e.onBeforeUnmount(()=>{x==null||x.close({reason:"unmount"})}),t({configureFileNaming:g=>{i.value={...i.value,...g}}}),(g,C)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-primary",disabled:N.value||!b.value,onClick:e.withModifiers(z,["prevent"])},e.toDisplayString(e.unref(r)("Upload")),9,Za),N.value?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(q,["prevent"])},e.toDisplayString(e.unref(r)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(W,["prevent"])},e.toDisplayString(e.unref(r)("Close")),1))]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Le,{icon:e.unref(or),title:e.unref(r)("Upload Files")},null,8,["icon","title"]),e.createElementVNode("div",Oa,[e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":C[0]||(C[0]=S=>b.value=S),name:"document_type",class:"vuefinder__upload-modal__document-type-select",style:{width:"100%",padding:"6px","margin-bottom":"10px","border-radius":"4px","border-width":"2px","border-style":"dashed","border-color":"#e5e7eb"}},[e.createElementVNode("option",Ra,e.toDisplayString(e.unref(r)("Select Document Type")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,S=>(e.openBlock(),e.createElementBlock("option",{key:S.id,value:S.id},e.toDisplayString(S.label),9,Ha))),128))],512),[[e.vModelSelect,b.value]])]),e.createElementVNode("div",{class:e.normalizeClass({hidden:!b.value})},[e.createElementVNode("div",{class:"vuefinder__upload-modal__drop-area",ref_key:"dropArea",ref:D,onClick:H},[B.value?(e.openBlock(),e.createElementBlock("div",za,e.toDisplayString(e.unref(r)("Release to drop these files.")),1)):(e.openBlock(),e.createElementBlock("div",Ua,e.toDisplayString(e.unref(r)("Drag and drop the files/folders to here or click here.")),1))],512),e.createElementVNode("div",{ref_key:"container",ref:m,class:"vuefinder__upload-modal__buttons"},[e.createElementVNode("button",{ref_key:"pickFiles",ref:v,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Select Files")),513),e.createElementVNode("button",{ref_key:"pickFolders",ref:_,type:"button",class:"vf-btn hidden vf-btn-secondary"},e.toDisplayString(e.unref(r)("Select Folders")),513),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary hidden",disabled:N.value,onClick:C[1]||(C[1]=S=>G(!1))},e.toDisplayString(e.unref(r)("Clear all")),9,Ia),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary hidden",disabled:N.value,onClick:C[2]||(C[2]=S=>G(!0))},e.toDisplayString(e.unref(r)("Clear only successful")),9,ja)],512)],2),e.createElementVNode("div",{class:e.normalizeClass([{hidden:b.value},"text-center p-4 text-gray-500"])},e.toDisplayString(e.unref(r)("Please select a document type to begin uploading")),3),e.createElementVNode("div",qa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,S=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__upload-modal__file-entry",key:S.id},[e.createElementVNode("span",{class:e.normalizeClass(["vuefinder__upload-modal__file-icon",$(S)])},[e.createElementVNode("span",{class:"vuefinder__upload-modal__file-icon-text",textContent:e.toDisplayString(A(S))},null,8,Pa)],2),e.createElementVNode("div",Ga,[e.createElementVNode("div",Ka,e.toDisplayString(e.unref(_n)(S.name,40))+" ("+e.toDisplayString(S.size)+")",1),e.createElementVNode("div",Wa,e.toDisplayString(e.unref(_n)(S.name,16))+" ("+e.toDisplayString(S.size)+")",1),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__file-status",$(S)])},[e.createTextVNode(e.toDisplayString(S.statusName)+" ",1),S.status===d.value.QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",Ya,e.toDisplayString(S.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vuefinder__upload-modal__file-remove",N.value?"disabled":""]),title:e.unref(r)("Delete"),disabled:N.value,onClick:V=>j(S)},C[4]||(C[4]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__upload-modal__file-remove-icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),10,Xa)]))),128)),p.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ja,e.toDisplayString(e.unref(r)("No files selected!")),1))]),y.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:C[3]||(C[3]=S=>y.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(y.value),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:u,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:f,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1}))}},ei={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function ti(n,t){return e.openBlock(),e.createElementBlock("svg",ei,t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)]))}const rr={render:ti},ni={class:"vuefinder__unarchive-modal__content"},oi={class:"vuefinder__unarchive-modal__items"},ri={class:"vuefinder__unarchive-modal__item"},si={key:0,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},li={key:1,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--file",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ai={class:"vuefinder__unarchive-modal__item-name"},ii={class:"vuefinder__unarchive-modal__info"},sr={__name:"ModalUnarchive",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(t.modal.data.items[0]),r=e.ref(""),i=e.ref([]),a=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:s.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("The file unarchived.")})},onError:c=>{r.value=o(c.message)}})};return(c,l)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:l[1]||(l[1]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Le,{icon:e.unref(rr),title:e.unref(o)("Unarchive")},null,8,["icon","title"]),e.createElementVNode("div",ni,[e.createElementVNode("div",oi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,d=>(e.openBlock(),e.createElementBlock("p",ri,[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",si,l[2]||(l[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):(e.openBlock(),e.createElementBlock("svg",li,l[3]||(l[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e.createElementVNode("span",ai,e.toDisplayString(d.basename),1)]))),256)),e.createElementVNode("p",ii,e.toDisplayString(e.unref(o)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(t).fs.data.dirname)+")",1),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:l[0]||(l[0]=d=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},ci={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function di(n,t){return e.openBlock(),e.createElementBlock("svg",ci,t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)]))}const lr={render:di},ui={class:"vuefinder__archive-modal__content"},mi={class:"vuefinder__archive-modal__form"},fi={class:"vuefinder__archive-modal__files vf-scrollbar"},vi={class:"vuefinder__archive-modal__file"},pi={key:0,class:"vuefinder__archive-modal__icon vuefinder__archive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},_i={key:1,class:"vuefinder__archive-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},hi={class:"vuefinder__archive-modal__file-name"},gi=["placeholder"],ar={__name:"ModalArchive",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(""),r=e.ref(""),i=e.ref(t.modal.data.items),a=()=>{i.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:i.value.map(({path:c,type:l})=>({path:c,type:l})),name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("The file(s) archived.")})},onError:c=>{r.value=o(c.message)}})};return(c,l)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:l[2]||(l[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Le,{icon:e.unref(lr),title:e.unref(o)("Archive the files")},null,8,["icon","title"]),e.createElementVNode("div",ui,[e.createElementVNode("div",mi,[e.createElementVNode("div",fi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,d=>(e.openBlock(),e.createElementBlock("p",vi,[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",pi,l[3]||(l[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):(e.openBlock(),e.createElementBlock("svg",_i,l[4]||(l[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))),e.createElementVNode("span",hi,e.toDisplayString(d.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":l[0]||(l[0]=d=>s.value=d),onKeyup:e.withKeys(a,["enter"]),class:"vuefinder__archive-modal__input",placeholder:e.unref(o)("Archive name. (.zip file will be created)"),type:"text"},null,40,gi),[[e.vModelText,s.value]]),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:l[1]||(l[1]=d=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}},ki={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"};function wi(n,t){return e.openBlock(),e.createElementBlock("svg",ki,t[0]||(t[0]=[e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1)]))}const Mn={render:wi},bi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function yi(n,t){return e.openBlock(),e.createElementBlock("svg",bi,t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)]))}const Ei={render:yi},Vi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Si(n,t){return e.openBlock(),e.createElementBlock("svg",Vi,t[0]||(t[0]=[e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1)]))}const Ni={render:Si},xi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Bi(n,t){return e.openBlock(),e.createElementBlock("svg",xi,t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1)]))}const Ci={render:Bi},$i={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Di(n,t){return e.openBlock(),e.createElementBlock("svg",$i,t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1)]))}const Ti={render:Di},Mi={class:"vuefinder__toolbar"},Ai={key:0,class:"vuefinder__toolbar__actions"},Li=["title"],Fi=["title"],Oi=["title"],Ri=["title"],Hi=["title"],zi=["title"],Ui=["title"],Ii={key:1,class:"vuefinder__toolbar__search-results"},ji={class:"pl-2"},qi={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Pi={class:"vuefinder__toolbar__controls"},Gi=["title"],Ki=["title"],Wi={__name:"Toolbar",setup(n){const t=e.inject("ServiceContainer"),{setStore:o}=t.storage,{t:s}=t.i18n,r=t.dragSelect,i=e.ref("");t.emitter.on("vf-search-query",({newQuery:l})=>{i.value=l});const a=()=>{t.fullScreen=!t.fullScreen};e.watch(()=>t.fullScreen,()=>{t.fullScreen?document.querySelector("body").style.overflow="hidden":document.querySelector("body").style.overflow="",o("full-screen",t.fullScreen),t.emitter.emit("vf-fullscreen-toggle")});const c=()=>{t.view=t.view==="list"?"grid":"list",r.refreshSelection(),o("viewport",t.view)};return(l,d)=>(e.openBlock(),e.createElementBlock("div",Mi,[i.value.length?(e.openBlock(),e.createElementBlock("div",Ii,[e.createElementVNode("div",ji,[e.createTextVNode(e.toDisplayString(e.unref(s)("Search results for"))+" ",1),e.createElementVNode("span",qi,e.toDisplayString(i.value),1)]),e.unref(t).fs.loading?(e.openBlock(),e.createBlock(e.unref(Mn),{key:0})):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",Ai,[e.unref(t).features.includes(e.unref(J).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(s)("New Folder"),onClick:d[0]||(d[0]=m=>e.unref(t).modal.open(tr,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(er))],8,Li)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(J).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5",title:e.unref(s)("New File"),onClick:d[1]||(d[1]=m=>e.unref(t).modal.open(Aa,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(nr))],8,Fi)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(J).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5",title:e.unref(s)("Rename"),onClick:d[2]||(d[2]=m=>e.unref(r).getCount()!==1||e.unref(t).modal.open(Mt,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Qo),{class:e.normalizeClass(e.unref(r).getCount()===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Oi)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(J).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5",title:e.unref(s)("Delete"),onClick:d[3]||(d[3]=m=>!e.unref(r).getCount()||e.unref(t).modal.open(Tn,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(Zo),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Ri)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(J).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5",title:e.unref(s)("Upload"),onClick:d[4]||(d[4]=m=>e.unref(t).modal.open(Qa,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(or))],8,Hi)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(J).UNARCHIVE)&&e.unref(r).getCount()===1&&e.unref(r).getSelected()[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5",title:e.unref(s)("Unarchive"),onClick:d[5]||(d[5]=m=>!e.unref(r).getCount()||e.unref(t).modal.open(sr,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(rr),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,zi)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(J).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5",title:e.unref(s)("Archive"),onClick:d[6]||(d[6]=m=>!e.unref(r).getCount()||e.unref(t).modal.open(ar,{items:e.unref(r).getSelected()}))},[e.createVNode(e.unref(lr),{class:e.normalizeClass(e.unref(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Ui)):e.createCommentVNode("",!0)])),e.createElementVNode("div",Pi,[e.unref(t).features.includes(e.unref(J).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:a,class:"mx-1.5",title:e.unref(s)("Toggle Full Screen")},[e.unref(t).fullScreen?(e.openBlock(),e.createBlock(e.unref(Ni),{key:0})):(e.openBlock(),e.createBlock(e.unref(Ei),{key:1}))],8,Gi)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5",title:e.unref(s)("Change View"),onClick:d[7]||(d[7]=m=>i.value.length||c())},[e.unref(t).view==="grid"?(e.openBlock(),e.createBlock(e.unref(Ci),{key:0,class:e.normalizeClass(["vf-toolbar-icon",i.value.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0),e.unref(t).view==="list"?(e.openBlock(),e.createBlock(e.unref(Ti),{key:1,class:e.normalizeClass(["vf-toolbar-icon",i.value.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0)],8,Ki)])]))}},Yi=(n,t=0,o=!1)=>{let s;return(...r)=>{o&&!s&&n(...r),clearTimeout(s),s=setTimeout(()=>{n(...r)},t)}},oo=(n,t,o)=>{const s=e.ref(n);return e.customRef((r,i)=>({get(){return r(),s.value},set:Yi(a=>{s.value=a,i()},t,o)}))},Xi={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Ji(n,t){return e.openBlock(),e.createElementBlock("svg",Xi,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"},null,-1)]))}const Zi={render:Ji},Qi={class:"vuefinder__move-modal__content"},ec={class:"vuefinder__move-modal__description"},tc={class:"vuefinder__move-modal__files vf-scrollbar"},nc={class:"vuefinder__move-modal__file"},oc={key:0,class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},rc={key:1,class:"vuefinder__move-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},sc={class:"vuefinder__move-modal__file-name"},lc={class:"vuefinder__move-modal__target-title"},ac={class:"vuefinder__move-modal__target-directory"},ic={class:"vuefinder__move-modal__target-path"},cc={class:"vuefinder__move-modal__selected-items"},hn={__name:"ModalMove",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(t.modal.data.items.from),r=e.ref(""),i=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"move",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map(({path:a,type:c})=>({path:a,type:c})),item:t.modal.data.items.to.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("Files moved.",t.modal.data.items.to.name)})},onError:a=>{r.value=o(a.message)}})};return(a,c)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Yes, Move!")),1),e.createElementVNode("button",{type:"button",onClick:c[1]||(c[1]=l=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",cc,e.toDisplayString(e.unref(o)("%s item(s) selected.",s.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(Le,{icon:e.unref(Zi),title:e.unref(o)("Move files")},null,8,["icon","title"]),e.createElementVNode("div",Qi,[e.createElementVNode("p",ec,e.toDisplayString(e.unref(o)("Are you sure you want to move these files?")),1),e.createElementVNode("div",tc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,l=>(e.openBlock(),e.createElementBlock("div",nc,[e.createElementVNode("div",null,[l.type==="dir"?(e.openBlock(),e.createElementBlock("svg",oc,c[2]||(c[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)]))):(e.openBlock(),e.createElementBlock("svg",rc,c[3]||(c[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])))]),e.createElementVNode("div",sc,e.toDisplayString(l.path),1)]))),256))]),e.createElementVNode("h4",lc,e.toDisplayString(e.unref(o)("Target Directory")),1),e.createElementVNode("p",ac,[c[4]||(c[4]=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e.createElementVNode("span",ic,e.toDisplayString(e.unref(t).modal.data.items.to.path),1)]),r.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:c[0]||(c[0]=l=>r.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}},dc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"-40 -40 580 580"};function uc(n,t){return e.openBlock(),e.createElementBlock("svg",dc,t[0]||(t[0]=[e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1)]))}const mc={render:uc},fc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"};function vc(n,t){return e.openBlock(),e.createElementBlock("svg",fc,t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1)]))}const pc={render:vc},_c={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"0 0 24 24"};function hc(n,t){return e.openBlock(),e.createElementBlock("svg",_c,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)]))}const gc={render:hc},kc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 20 20"};function wc(n,t){return e.openBlock(),e.createElementBlock("svg",kc,t[0]||(t[0]=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1)]))}const bc={render:wc},yc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",viewBox:"0 0 20 20"};function Ec(n,t){return e.openBlock(),e.createElementBlock("svg",yc,t[0]||(t[0]=[e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1)]))}const Vc={render:Ec},Sc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"};function Nc(n,t){return e.openBlock(),e.createElementBlock("svg",Sc,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)]))}const xc={render:Nc},Bc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",viewBox:"0 0 24 24"};function Cc(n,t){return e.openBlock(),e.createElementBlock("svg",Bc,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1)]))}const It={render:Cc},$c={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-6 w-6 p-1 rounded text-slate-700 dark:text-neutral-300 cursor-pointer",viewBox:"0 0 24 24"};function Dc(n,t){return e.openBlock(),e.createElementBlock("svg",$c,t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1)]))}const Tc={render:Dc},Mc={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 rounded text-slate-700 hover:bg-neutral-100 dark:fill-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 448 512"};function Ac(n,t){return e.openBlock(),e.createElementBlock("svg",Mc,t[0]||(t[0]=[e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1)]))}const Lc={render:Ac},Fc={class:"vuefinder__breadcrumb__container"},Oc=["title"],Rc=["title"],Hc=["title"],zc=["title"],Uc={class:"vuefinder__breadcrumb__list"},Ic={key:0,class:"vuefinder__breadcrumb__hidden-list"},jc={class:"relative"},qc=["onDragover","onDragleave","onDrop","title","onClick"],Pc={class:"vuefinder__breadcrumb__search-mode"},Gc=["placeholder"],Kc={class:"vuefinder__breadcrumb__hidden-dropdown"},Wc=["onDrop","onClick"],Yc={class:"vuefinder__breadcrumb__hidden-item-content"},Xc={class:"vuefinder__breadcrumb__hidden-item-text"},Jc={__name:"Breadcrumb",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=t.dragSelect,{setStore:r}=t.storage,i=e.ref(null),a=oo(0,100);e.watch(a,M=>{const E=i.value.children;let w=0,$=0,A=5,H=1;t.fs.limitBreadcrumbItems(A),e.nextTick(()=>{for(let z=E.length-1;z>=0&&!(w+E[z].offsetWidth>a.value-40);z--)w+=parseInt(E[z].offsetWidth,10),$++;$<H&&($=H),$>A&&($=A),t.fs.limitBreadcrumbItems($)})});const c=()=>{a.value=i.value.offsetWidth};let l=e.ref(null);e.onMounted(()=>{l.value=new ResizeObserver(c),l.value.observe(i.value)}),e.onUnmounted(()=>{l.value.disconnect()});const d=(M,E=null)=>{M.preventDefault(),s.isDraggingRef.value=!1,f(M),E??(E=t.fs.hiddenBreadcrumbs.length-1);let w=JSON.parse(M.dataTransfer.getData("items"));if(w.find($=>$.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(hn,{items:{from:w,to:t.fs.hiddenBreadcrumbs[E]??{path:t.fs.adapter+"://"}}})},m=(M,E=null)=>{M.preventDefault(),s.isDraggingRef.value=!1,f(M),E??(E=t.fs.breadcrumbs.length-2);let w=JSON.parse(M.dataTransfer.getData("items"));if(w.find($=>$.storage!==t.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}t.modal.open(hn,{items:{from:w,to:t.fs.breadcrumbs[E]??{path:t.fs.adapter+"://"}}})},u=M=>{M.preventDefault(),t.fs.isGoUpAvailable()?(M.dataTransfer.dropEffect="copy",M.currentTarget.classList.add("bg-blue-200","dark:bg-slate-600")):(M.dataTransfer.dropEffect="none",M.dataTransfer.effectAllowed="none")},f=M=>{M.preventDefault(),M.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600"),t.fs.isGoUpAvailable()&&M.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600")},v=()=>{x(),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})},_=()=>{x(),!t.fs.isGoUpAvailable()||t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.parentFolderPath}})},D=M=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:M.path}}),t.fs.toggleHiddenBreadcrumbs(!1)},p=()=>{t.fs.showHiddenBreadcrumbs&&t.fs.toggleHiddenBreadcrumbs(!1)},y={mounted(M,E,w,$){M.clickOutsideEvent=function(A){M===A.target||M.contains(A.target)||E.value()},document.body.addEventListener("click",M.clickOutsideEvent)},beforeUnmount(M,E,w,$){document.body.removeEventListener("click",M.clickOutsideEvent)}},N=()=>{t.showTreeView=!t.showTreeView};e.watch(()=>t.showTreeView,(M,E)=>{M!==E&&r("show-tree-view",M)});const B=e.ref(null),k=()=>{t.features.includes(J.SEARCH)&&(t.fs.searchMode=!0,e.nextTick(()=>B.value.focus()))},b=oo("",400);e.watch(b,M=>{t.emitter.emit("vf-toast-clear"),t.emitter.emit("vf-search-query",{newQuery:M})}),e.watch(()=>t.fs.searchMode,M=>{M&&e.nextTick(()=>B.value.focus())});const x=()=>{t.fs.searchMode=!1,b.value=""};t.emitter.on("vf-search-exit",()=>{x()});const F=()=>{b.value===""&&x()};return(M,E)=>(e.openBlock(),e.createElementBlock("div",Fc,[e.createElementVNode("span",{title:e.unref(o)("Toggle Tree View")},[e.createVNode(e.unref(Tc),{onClick:N,class:e.normalizeClass(["vuefinder__breadcrumb__toggle-tree",e.unref(t).showTreeView?"vuefinder__breadcrumb__toggle-tree--active":""])},null,8,["class"])],8,Oc),e.createElementVNode("span",{title:e.unref(o)("Go up a directory")},[e.createVNode(e.unref(pc),{onDragover:E[0]||(E[0]=w=>u(w)),onDragleave:E[1]||(E[1]=w=>f(w)),onDrop:E[2]||(E[2]=w=>m(w)),onClick:_,class:e.normalizeClass(e.unref(t).fs.isGoUpAvailable()?"vuefinder__breadcrumb__go-up--active":"vuefinder__breadcrumb__go-up--inactive")},null,8,["class"])],8,Rc),e.unref(t).fs.loading?(e.openBlock(),e.createElementBlock("span",{key:1,title:e.unref(o)("Cancel")},[e.createVNode(e.unref(gc),{onClick:E[3]||(E[3]=w=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,zc)):(e.openBlock(),e.createElementBlock("span",{key:0,title:e.unref(o)("Refresh")},[e.createVNode(e.unref(mc),{onClick:v})],8,Hc)),e.withDirectives(e.createElementVNode("div",{onClick:e.withModifiers(k,["self"]),class:"group vuefinder__breadcrumb__search-container"},[e.createElementVNode("div",null,[e.createVNode(e.unref(bc),{onDragover:E[4]||(E[4]=w=>u(w)),onDragleave:E[5]||(E[5]=w=>f(w)),onDrop:E[6]||(E[6]=w=>m(w,-1)),onClick:E[7]||(E[7]=w=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.unref(t).fs.adapter}}))})]),e.createElementVNode("div",Uc,[e.unref(t).fs.hiddenBreadcrumbs.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",Ic,[E[13]||(E[13]=e.createElementVNode("div",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("div",jc,[e.createElementVNode("span",{onDragenter:E[8]||(E[8]=w=>e.unref(t).fs.toggleHiddenBreadcrumbs(!0)),onClick:E[9]||(E[9]=w=>e.unref(t).fs.toggleHiddenBreadcrumbs()),class:"vuefinder__breadcrumb__hidden-toggle"},[e.createVNode(e.unref(Lc),{class:"vuefinder__breadcrumb__hidden-toggle-icon"})],32)])])),[[y,p]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:i,class:"vuefinder__breadcrumb__visible-list",onClick:e.withModifiers(k,["self"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.breadcrumbs,(w,$)=>(e.openBlock(),e.createElementBlock("div",{key:$},[E[14]||(E[14]=e.createElementVNode("span",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("span",{onDragover:A=>$===e.unref(t).fs.breadcrumbs.length-1||u(A),onDragleave:A=>$===e.unref(t).fs.breadcrumbs.length-1||f(A),onDrop:A=>$===e.unref(t).fs.breadcrumbs.length-1||m(A,$),class:"vuefinder__breadcrumb__item",title:w.basename,onClick:A=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.unref(t).fs.adapter,path:w.path}})},e.toDisplayString(w.name),41,qc)]))),128))],512),e.unref(t).fs.loading?(e.openBlock(),e.createBlock(e.unref(Mn),{key:0})):e.createCommentVNode("",!0)],512),[[e.vShow,!e.unref(t).fs.searchMode]]),e.withDirectives(e.createElementVNode("div",Pc,[e.createElementVNode("div",null,[e.createVNode(e.unref(Vc))]),e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:B,onKeydown:e.withKeys(x,["esc"]),onBlur:F,"onUpdate:modelValue":E[10]||(E[10]=w=>e.isRef(b)?b.value=w:null),placeholder:e.unref(o)("Search anything.."),class:"vuefinder__breadcrumb__search-input",type:"text"},null,40,Gc),[[e.vModelText,e.unref(b)]]),e.createVNode(e.unref(xc),{onClick:x})],512),[[e.vShow,e.unref(t).fs.searchMode]]),e.withDirectives(e.createElementVNode("div",Kc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.hiddenBreadcrumbs,(w,$)=>(e.openBlock(),e.createElementBlock("div",{key:$,onDragover:E[11]||(E[11]=A=>u(A)),onDragleave:E[12]||(E[12]=A=>f(A)),onDrop:A=>d(A,$),onClick:A=>D(w),class:"vuefinder__breadcrumb__hidden-item"},[e.createElementVNode("div",Yc,[e.createElementVNode("span",null,[e.createVNode(e.unref(It),{class:"vuefinder__breadcrumb__hidden-item-icon"})]),E[15]||(E[15]=e.createTextVNode()),e.createElementVNode("span",Xc,e.toDisplayString(w.name),1)])],40,Wc))),128))],512),[[e.vShow,e.unref(t).fs.showHiddenBreadcrumbs]])]))}},ir=(n,t=null)=>new Date(n*1e3).toLocaleString(t??navigator.language??"en-US"),Zc=["onClick"],Qc={__name:"Toast",setup(n){const t=e.inject("ServiceContainer"),{getStore:o}=t.storage,s=e.ref(o("full-screen",!1)),r=e.ref([]),i=l=>l==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",a=l=>{r.value.splice(l,1)},c=l=>{let d=r.value.findIndex(m=>m.id===l);d!==-1&&a(d)};return t.emitter.on("vf-toast-clear",()=>{r.value=[]}),t.emitter.on("vf-toast-push",l=>{let d=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");l.id=d,r.value.push(l),setTimeout(()=>{c(d)},5e3)}),(l,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__toast",s.value.value?"vuefinder__toast--fixed":"vuefinder__toast--absolute"])},[e.createVNode(e.TransitionGroup,{name:"vuefinder__toast-item","enter-active-class":"vuefinder__toast-item--enter-active","leave-active-class":"vuefinder__toast-item--leave-active","leave-to-class":"vuefinder__toast-item--leave-to"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(m,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,onClick:f=>a(u),class:e.normalizeClass(["vuefinder__toast__message",i(m.type)])},e.toDisplayString(m.label),11,Zc))),128))]),_:1})],2))}},ed={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function td(n,t){return e.openBlock(),e.createElementBlock("svg",ed,t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)]))}const nd={render:td},od={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function rd(n,t){return e.openBlock(),e.createElementBlock("svg",od,t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1)]))}const sd={render:rd},wt={__name:"SortIcon",props:{direction:String},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",null,[n.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(nd),{key:0})):e.createCommentVNode("",!0),n.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(sd),{key:1})):e.createCommentVNode("",!0)]))}},ld={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500",viewBox:"0 0 24 24"};function ad(n,t){return e.openBlock(),e.createElementBlock("svg",ld,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)]))}const id={render:ad},cd={class:"vuefinder__item-icon"},Zt={__name:"ItemIcon",props:{type:{type:String,required:!0},small:{type:Boolean,default:!1}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("span",cd,[n.type==="dir"?(e.openBlock(),e.createBlock(e.unref(It),{key:0,class:e.normalizeClass(n.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large")},null,8,["class"])):(e.openBlock(),e.createBlock(e.unref(id),{key:1,class:e.normalizeClass(n.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large")},null,8,["class"]))]))}},dd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",viewBox:"0 0 24 24"};function ud(n,t){return e.openBlock(),e.createElementBlock("svg",dd,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)]))}const md={render:ud},fd={class:"vuefinder__drag-item__container"},vd={class:"vuefinder__drag-item__count"},pd={__name:"DragItem",props:{count:{type:Number,default:0}},setup(n){const t=n;return(o,s)=>(e.openBlock(),e.createElementBlock("div",fd,[e.createVNode(e.unref(md)),e.createElementVNode("div",vd,e.toDisplayString(t.count),1)]))}},_d={class:"vuefinder__text-preview"},hd={class:"vuefinder__text-preview__header"},gd=["title"],kd={class:"vuefinder__text-preview__actions"},wd={key:0,class:"vuefinder__text-preview__content"},bd={key:1},yd={__name:"Text",emits:["success"],setup(n,{emit:t}){const o=t,s=e.ref(""),r=e.ref(""),i=e.ref(null),a=e.ref(!1),c=e.ref(""),l=e.ref(!1),d=e.inject("ServiceContainer"),{t:m}=d.i18n;e.onMounted(()=>{d.requester.send({url:"",method:"get",params:{q:"preview",adapter:d.modal.data.adapter,path:d.modal.data.item.path},responseType:"text"}).then(v=>{s.value=v,o("success")})});const u=()=>{a.value=!a.value,r.value=s.value},f=()=>{c.value="",l.value=!1,d.requester.send({url:"",method:"post",params:{q:"save",adapter:d.modal.data.adapter,path:d.modal.data.item.path},body:{content:r.value},responseType:"text"}).then(v=>{c.value=m("Updated."),s.value=v,o("success"),a.value=!a.value}).catch(v=>{c.value=m(v.message),l.value=!0})};return(v,_)=>(e.openBlock(),e.createElementBlock("div",_d,[e.createElementVNode("div",hd,[e.createElementVNode("div",{class:"vuefinder__text-preview__title",id:"modal-title",title:e.unref(d).modal.data.item.path},e.toDisplayString(e.unref(d).modal.data.item.basename),9,gd),e.createElementVNode("div",kd,[a.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:f,class:"vuefinder__text-preview__save-button"},e.toDisplayString(e.unref(m)("Save")),1)):e.createCommentVNode("",!0),e.unref(d).features.includes(e.unref(J).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__text-preview__edit-button",onClick:_[0]||(_[0]=D=>u())},e.toDisplayString(a.value?e.unref(m)("Cancel"):e.unref(m)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[a.value?(e.openBlock(),e.createElementBlock("div",bd,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:i,"onUpdate:modelValue":_[1]||(_[1]=D=>r.value=D),class:"vuefinder__text-preview__textarea",name:"text",cols:"30",rows:"10"},null,512),[[e.vModelText,r.value]])])):(e.openBlock(),e.createElementBlock("pre",wd,e.toDisplayString(s.value),1)),c.value.length?(e.openBlock(),e.createBlock($e,{key:2,onHidden:_[2]||(_[2]=D=>c.value=""),error:l.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])]))}},Ed={class:"vuefinder__image-preview"},Vd={class:"vuefinder__image-preview__header"},Sd=["title"],Nd={class:"vuefinder__image-preview__actions"},xd={class:"vuefinder__image-preview__image-container"},Bd=["src"],Cd={__name:"Image",emits:["success"],setup(n,{emit:t}){const o=t,s=e.inject("ServiceContainer"),{t:r}=s.i18n,i=e.ref(null),a=e.ref(null),c=e.ref(!1),l=e.ref(""),d=e.ref(!1),m=()=>{c.value=!c.value,c.value?a.value=new Cr(i.value,{crop(f){}}):a.value.destroy()},u=()=>{a.value.getCroppedCanvas({width:795,height:341}).toBlob(f=>{l.value="",d.value=!1;const v=new FormData;v.set("file",f),s.requester.send({url:"",method:"post",params:{q:"upload",adapter:s.modal.data.adapter,path:s.modal.data.item.path},body:v}).then(_=>{l.value=r("Updated."),i.value.src=s.requester.getPreviewUrl(s.modal.data.adapter,s.modal.data.item),m(),o("success")}).catch(_=>{l.value=r(_.message),d.value=!0})})};return e.onMounted(()=>{o("success")}),(f,v)=>(e.openBlock(),e.createElementBlock("div",Ed,[e.createElementVNode("div",Vd,[e.createElementVNode("h3",{class:"vuefinder__image-preview__title",id:"modal-title",title:e.unref(s).modal.data.item.path},e.toDisplayString(e.unref(s).modal.data.item.basename),9,Sd),e.createElementVNode("div",Nd,[c.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:u,class:"vuefinder__image-preview__crop-button"},e.toDisplayString(e.unref(r)("Crop")),1)):e.createCommentVNode("",!0),e.unref(s).features.includes(e.unref(J).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__image-preview__edit-button",onClick:v[0]||(v[0]=_=>m())},e.toDisplayString(c.value?e.unref(r)("Cancel"):e.unref(r)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",xd,[e.createElementVNode("img",{ref_key:"image",ref:i,class:"vuefinder__image-preview__image",src:e.unref(s).requester.getPreviewUrl(e.unref(s).modal.data.adapter,e.unref(s).modal.data.item),alt:""},null,8,Bd)]),l.value.length?(e.openBlock(),e.createBlock($e,{key:0,onHidden:v[1]||(v[1]=_=>l.value=""),error:d.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)]))}},$d={class:"vuefinder__default-preview"},Dd={class:"vuefinder__default-preview__header"},Td=["title"],Md={__name:"Default",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),s=t;return e.onMounted(()=>{s("success")}),(r,i)=>(e.openBlock(),e.createElementBlock("div",$d,[e.createElementVNode("div",Dd,[e.createElementVNode("h3",{class:"vuefinder__default-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,Td)]),i[0]||(i[0]=e.createElementVNode("div",null,null,-1))]))}},Ad={class:"vuefinder__video-preview"},Ld=["title"],Fd={class:"vuefinder__video-preview__video",preload:"",controls:""},Od=["src"],Rd={__name:"Video",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),s=t,r=()=>o.requester.getPreviewUrl(o.modal.data.adapter,o.modal.data.item);return e.onMounted(()=>{s("success")}),(i,a)=>(e.openBlock(),e.createElementBlock("div",Ad,[e.createElementVNode("h3",{class:"vuefinder__video-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,Ld),e.createElementVNode("div",null,[e.createElementVNode("video",Fd,[e.createElementVNode("source",{src:r(),type:"video/mp4"},null,8,Od),a[0]||(a[0]=e.createTextVNode(" Your browser does not support the video tag. "))])])]))}},Hd={class:"vuefinder__audio-preview"},zd=["title"],Ud={class:"vuefinder__audio-preview__audio",controls:""},Id=["src"],jd={__name:"Audio",emits:["success"],setup(n,{emit:t}){const o=t,s=e.inject("ServiceContainer"),r=()=>s.requester.getPreviewUrl(s.modal.data.adapter,s.modal.data.item);return e.onMounted(()=>{o("success")}),(i,a)=>(e.openBlock(),e.createElementBlock("div",Hd,[e.createElementVNode("h3",{class:"vuefinder__audio-preview__title",id:"modal-title",title:e.unref(s).modal.data.item.path},e.toDisplayString(e.unref(s).modal.data.item.basename),9,zd),e.createElementVNode("div",null,[e.createElementVNode("audio",Ud,[e.createElementVNode("source",{src:r(),type:"audio/mpeg"},null,8,Id),a[0]||(a[0]=e.createTextVNode(" Your browser does not support the audio element. "))])])]))}},qd={class:"vuefinder__pdf-preview"},Pd=["title"],Gd=["data"],Kd=["src"],Wd={__name:"Pdf",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),s=t,r=()=>o.requester.getPreviewUrl(o.modal.data.adapter,o.modal.data.item);return e.onMounted(()=>{s("success")}),(i,a)=>(e.openBlock(),e.createElementBlock("div",qd,[e.createElementVNode("h3",{class:"vuefinder__pdf-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,Pd),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"vuefinder__pdf-preview__object",data:r(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"vuefinder__pdf-preview__iframe",src:r(),width:"100%",height:"100%"},a[0]||(a[0]=[e.createElementVNode("p",null,[e.createTextVNode(" Your browser does not support PDFs. "),e.createElementVNode("a",{href:"https://example.com/test.pdf"},"Download the PDF"),e.createTextVNode(". ")],-1)]),8,Kd)],8,Gd)])]))}},Yd={class:"vuefinder__preview-modal__content"},Xd={key:0},Jd={class:"vuefinder__preview-modal__loading"},Zd={key:0,class:"vuefinder__preview-modal__loading-indicator"},Qd={class:"vuefinder__preview-modal__details"},eu={class:"font-bold"},tu={class:"font-bold pl-2"},nu={key:0,class:"vuefinder__preview-modal__note"},ou=["download","href"],cr={__name:"ModalPreview",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(!1),r=a=>(t.modal.data.item.mime_type??"").startsWith(a),i=t.features.includes(J.PREVIEW);return i||(s.value=!0),(a,c)=>(e.openBlock(),e.createBlock(Ce,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c[6]||(c[6]=l=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Close")),1),e.unref(t).features.includes(e.unref(J).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.adapter,e.unref(t).modal.data.item),href:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.adapter,e.unref(t).modal.data.item)},e.toDisplayString(e.unref(o)("Download")),9,ou)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",Yd,[e.unref(i)?(e.openBlock(),e.createElementBlock("div",Xd,[r("text")?(e.openBlock(),e.createBlock(yd,{key:0,onSuccess:c[0]||(c[0]=l=>s.value=!0)})):r("image")?(e.openBlock(),e.createBlock(Cd,{key:1,onSuccess:c[1]||(c[1]=l=>s.value=!0)})):r("video")?(e.openBlock(),e.createBlock(Rd,{key:2,onSuccess:c[2]||(c[2]=l=>s.value=!0)})):r("audio")?(e.openBlock(),e.createBlock(jd,{key:3,onSuccess:c[3]||(c[3]=l=>s.value=!0)})):r("application/pdf")?(e.openBlock(),e.createBlock(Wd,{key:4,onSuccess:c[4]||(c[4]=l=>s.value=!0)})):(e.openBlock(),e.createBlock(Md,{key:5,onSuccess:c[5]||(c[5]=l=>s.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",Jd,[s.value===!1?(e.openBlock(),e.createElementBlock("div",Zd,[c[7]||(c[7]=e.createElementVNode("svg",{class:"vuefinder__preview-modal__spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"vuefinder__preview-modal__spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"vuefinder__preview-modal__spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",Qd,[e.createElementVNode("div",null,[e.createElementVNode("span",eu,e.toDisplayString(e.unref(o)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",tu,e.toDisplayString(e.unref(o)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(ir)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(J).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",nu,[e.createElementVNode("span",null,e.toDisplayString(e.unref(o)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}},ru={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"};function su(n,t){return e.openBlock(),e.createElementBlock("svg",ru,t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1)]))}const dr={render:su},lu=["data-type","data-item","data-index"],au={class:"vuefinder__item-content relative"},iu={__name:"Item",props:{item:{type:Object},index:{type:Number},dragImage:{type:Object}},setup(n){const t=n,o=e.inject("ServiceContainer"),s=o.dragSelect,r=e.ref(""),i=e.ref(""),a=async p=>{if(p)try{const B=btoa("noblecoder:Admin100%"),k=await fetch("http://pmra.test/api/documents/check-expiry",{method:"POST",headers:{Authorization:`Basic ${B}`,"Content-Type":"application/json"},body:JSON.stringify({filename:p.basename,path:p.path,full_path:`${o.fs.adapter}://${p.path}`})});if(!k.ok)throw new Error("Failed to check expiry status");const b=await k.json();if(b.isExpiring){const x=b.timeUnit;r.value=b.timeRemaining<=0?"Expired":`Expires in ${b.timeRemaining} ${x}`,b.timeRemaining<=0?i.value="text-red-600 font-bold":b.timeUnit==="days"&&b.timeRemaining<=7||b.timeUnit==="months"&&b.timeRemaining===1||b.timeUnit==="years"&&b.timeRemaining===1?i.value="text-orange-500":b.timeUnit==="days"&&b.timeRemaining<=30||b.timeUnit==="months"&&b.timeRemaining<=3||b.timeUnit==="years"&&b.timeRemaining<=1?i.value="text-yellow-500":i.value="text-blue-500"}else r.value="",i.value=""}catch(y){console.error("Error checking file expiry:",y),r.value="",i.value=""}},c=p=>{p.type==="dir"?(o.emitter.emit("vf-search-exit"),o.emitter.emit("vf-fetch",{params:{q:"index",adapter:o.fs.adapter,path:p.path}})):o.modal.open(cr,{adapter:o.fs.adapter,item:p})},l={mounted(p,y,N,B){N.props.draggable&&(p.addEventListener("dragstart",k=>d(k,y.value)),p.addEventListener("dragover",k=>u(k,y.value)),p.addEventListener("drop",k=>m(k,y.value)))},beforeUnmount(p,y,N,B){N.props.draggable&&(p.removeEventListener("dragstart",d),p.removeEventListener("dragover",u),p.removeEventListener("drop",m))}},d=(p,y)=>{if(p.altKey||p.ctrlKey||p.metaKey)return p.preventDefault(),!1;s.isDraggingRef.value=!0,p.dataTransfer.setDragImage(t.dragImage.$el,0,15),p.dataTransfer.effectAllowed="all",p.dataTransfer.dropEffect="copy",p.dataTransfer.setData("items",JSON.stringify(s.getSelected()))},m=(p,y)=>{p.preventDefault(),s.isDraggingRef.value=!1;let N=JSON.parse(p.dataTransfer.getData("items"));if(N.find(B=>B.storage!==o.fs.adapter)){alert("Moving items between different storages is not supported yet.");return}o.modal.open(hn,{items:{from:N,to:y}})},u=(p,y)=>{p.preventDefault(),!y||y.type!=="dir"||s.getSelection().find(N=>N===p.currentTarget)?(p.dataTransfer.dropEffect="none",p.dataTransfer.effectAllowed="none"):p.dataTransfer.dropEffect="copy"};let f=null,v=!1;const _=()=>{f&&clearTimeout(f)},D=p=>{if(!v)v=!0,setTimeout(()=>v=!1,300);else return v=!1,c(t.item),clearTimeout(f),!1;f=setTimeout(()=>{const y=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:p.target.getBoundingClientRect().x,clientY:p.target.getBoundingClientRect().y});p.target.dispatchEvent(y)},500)};return e.watch(()=>t.item,p=>{p&&a(p)},{immediate:!0,deep:!0}),e.watch(()=>o.fs.path,()=>{t.item&&a(t.item)}),e.watch(()=>o.fs.data,()=>{t.item&&a(t.item)},{deep:!0}),e.onMounted(()=>{t.item&&a(t.item)}),(p,y)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle({opacity:e.unref(s).isDraggingRef.value&&e.unref(s).getSelection().find(N=>p.$el===N)?"0.5 !important":""}),class:e.normalizeClass(["vuefinder__item","vf-item-"+e.unref(s).explorerId]),"data-type":n.item.type,key:n.item.path,"data-item":JSON.stringify(n.item),"data-index":n.index,onDblclick:y[0]||(y[0]=N=>c(n.item)),onTouchstart:y[1]||(y[1]=N=>D(N)),onTouchend:y[2]||(y[2]=N=>_()),onContextmenu:y[3]||(y[3]=e.withModifiers(N=>e.unref(o).emitter.emit("vf-contextmenu-show",{event:N,items:e.unref(s).getSelected(),target:n.item}),["prevent"]))},[e.createElementVNode("div",au,[e.renderSlot(p.$slots,"default",{},void 0,!0),e.unref(o).pinnedFolders.find(N=>N.path===n.item.path)?(e.openBlock(),e.createBlock(e.unref(dr),{key:0,class:"vuefinder__item--pinned"})):e.createCommentVNode("",!0),r.value?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["vuefinder__item-expiry-status",[i.value,e.unref(o).view==="grid"?"grid-view":"list-view"]])},e.toDisplayString(r.value),3)):e.createCommentVNode("",!0)])],46,lu)),[[l,n.item]])}},Qt=Xo(iu,[["__scopeId","data-v-237733c0"]]),cu={class:"vuefinder__explorer__container"},du={key:0,class:"vuefinder__explorer__header"},uu={class:"vuefinder__explorer__drag-item"},mu={class:"vuefinder__explorer__item-list-content"},fu={class:"vuefinder__explorer__item-list-name"},vu={class:"vuefinder__explorer__item-name"},pu={class:"vuefinder__explorer__item-path"},_u={class:"vuefinder__explorer__item-list-content"},hu={class:"vuefinder__explorer__item-list-name"},gu={class:"vuefinder__explorer__item-name"},ku={class:"vuefinder__explorer__item-size"},wu={class:"vuefinder__explorer__item-date"},bu={class:"vuefinder__explorer__item-grid-content"},yu=["data-src","alt"],Eu={key:2,class:"vuefinder__explorer__item-extension"},Vu={class:"vuefinder__explorer__item-title break-all"},Su={__name:"Explorer",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=u=>u==null?void 0:u.substring(0,3),r=e.ref(null),i=e.ref(""),a=t.dragSelect;let c;t.emitter.on("vf-fullscreen-toggle",()=>{a.area.value.style.height=null}),t.emitter.on("vf-search-query",({newQuery:u})=>{i.value=u,u?t.emitter.emit("vf-fetch",{params:{q:"search",adapter:t.fs.adapter,path:t.fs.data.dirname,filter:u},onSuccess:f=>{f.files.length||t.emitter.emit("vf-toast-push",{label:o("No search result found.")})}}):t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})});const l=e.reactive({active:!1,column:"",order:""}),d=(u=!0)=>{let f=[...t.fs.data.files],v=l.column,_=l.order==="asc"?1:-1;if(!u)return f;const D=(p,y)=>typeof p=="string"&&typeof y=="string"?p.toLowerCase().localeCompare(y.toLowerCase()):p<y?-1:p>y?1:0;return l.active&&(f=f.slice().sort((p,y)=>D(p[v],y[v])*_)),f},m=u=>{l.active&&l.column===u?(l.active=l.order==="asc",l.column=u,l.order="desc"):(l.active=!0,l.column=u,l.order="asc")};return e.onMounted(()=>{c=new Br(a.area.value)}),e.onUpdated(()=>{c.update()}),e.onBeforeUnmount(()=>{c.destroy()}),(u,f)=>(e.openBlock(),e.createElementBlock("div",cu,[e.unref(t).view==="list"||i.value.length?(e.openBlock(),e.createElementBlock("div",du,[e.createElementVNode("div",{onClick:f[0]||(f[0]=v=>m("basename")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--name vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(o)("Name"))+" ",1),e.withDirectives(e.createVNode(wt,{direction:l.order},null,8,["direction"]),[[e.vShow,l.active&&l.column==="basename"]])]),i.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:f[1]||(f[1]=v=>m("file_size")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--size vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(o)("Size"))+" ",1),e.withDirectives(e.createVNode(wt,{direction:l.order},null,8,["direction"]),[[e.vShow,l.active&&l.column==="file_size"]])])),i.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:f[2]||(f[2]=v=>m("last_modified")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--date vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(o)("Date"))+" ",1),e.withDirectives(e.createVNode(wt,{direction:l.order},null,8,["direction"]),[[e.vShow,l.active&&l.column==="last_modified"]])])),i.value.length?(e.openBlock(),e.createElementBlock("div",{key:2,onClick:f[3]||(f[3]=v=>m("path")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--path vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(o)("Filepath"))+" ",1),e.withDirectives(e.createVNode(wt,{direction:l.order},null,8,["direction"]),[[e.vShow,l.active&&l.column==="path"]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",uu,[e.createVNode(pd,{ref_key:"dragImage",ref:r,count:e.unref(a).getCount()},null,8,["count"])]),e.createElementVNode("div",{ref:e.unref(a).scrollBarContainer,class:e.normalizeClass(["vf-explorer-scrollbar-container vuefinder__explorer__scrollbar-container",[{"grid-view":e.unref(t).view==="grid"},{"search-active":i.value.length}]])},[e.createElementVNode("div",{ref:e.unref(a).scrollBar,class:"vuefinder__explorer__scrollbar"},null,512)],2),e.createElementVNode("div",{ref:e.unref(a).area,class:"vuefinder__explorer__selector-area vf-explorer-scrollbar vf-selector-area",onContextmenu:f[4]||(f[4]=e.withModifiers(v=>e.unref(t).emitter.emit("vf-contextmenu-show",{event:v,items:e.unref(a).getSelected()}),["self","prevent"]))},[i.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(d(),(v,_)=>(e.openBlock(),e.createBlock(Qt,{item:v,index:_,dragImage:r.value,class:"vf-item vf-item-list"},{default:e.withCtx(()=>[e.createElementVNode("div",mu,[e.createElementVNode("div",fu,[e.createVNode(Zt,{type:v.type,small:e.unref(t).compactListView},null,8,["type","small"]),e.createElementVNode("span",vu,e.toDisplayString(v.basename),1)]),e.createElementVNode("div",pu,e.toDisplayString(v.path),1)])]),_:2},1032,["item","index","dragImage"]))),256)):e.createCommentVNode("",!0),e.unref(t).view==="list"&&!i.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(d(),(v,_)=>(e.openBlock(),e.createBlock(Qt,{item:v,index:_,dragImage:r.value,class:"vf-item vf-item-list",draggable:"true",key:v.path},{default:e.withCtx(()=>[e.createElementVNode("div",_u,[e.createElementVNode("div",hu,[e.createVNode(Zt,{type:v.type,small:e.unref(t).compactListView},null,8,["type","small"]),e.createElementVNode("span",gu,e.toDisplayString(v.basename),1)]),e.createElementVNode("div",ku,e.toDisplayString(v.file_size?e.unref(t).filesize(v.file_size):""),1),e.createElementVNode("div",wu,e.toDisplayString(e.unref(ir)(v.last_modified)),1)])]),_:2},1032,["item","index","dragImage"]))),128)):e.createCommentVNode("",!0),e.unref(t).view==="grid"&&!i.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(d(!1),(v,_)=>(e.openBlock(),e.createBlock(Qt,{item:v,index:_,dragImage:r.value,class:"vf-item vf-item-grid",draggable:"true"},{default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",bu,[(v.mime_type??"").startsWith("image")&&e.unref(t).showThumbnails?(e.openBlock(),e.createElementBlock("img",{src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"vuefinder__explorer__item-thumbnail lazy","data-src":e.unref(t).requester.getPreviewUrl(e.unref(t).fs.adapter,v),alt:v.basename,key:v.path},null,8,yu)):(e.openBlock(),e.createBlock(Zt,{key:1,type:v.type},null,8,["type"])),!((v.mime_type??"").startsWith("image")&&e.unref(t).showThumbnails)&&v.type!=="dir"?(e.openBlock(),e.createElementBlock("div",Eu,e.toDisplayString(s(v.extension)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",Vu,e.toDisplayString(e.unref(_n)(v.basename)),1)])]),_:2},1032,["item","index","dragImage"]))),256)):e.createCommentVNode("",!0)],544),e.createVNode(Qc)]))}},Nu=["href","download"],xu=["onClick"],Bu={__name:"ContextMenu",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,s=e.ref(null),r=e.ref([]),i=e.ref(""),a=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),c=e.computed(()=>a.items.filter(u=>u.key==null||t.features.includes(u.key)));t.emitter.on("vf-context-selected",u=>{r.value=u});const l={newfolder:{key:J.NEW_FOLDER,title:()=>o("New Folder"),action:()=>t.modal.open(tr)},selectAll:{title:()=>o("Select All"),action:()=>t.dragSelect.selectAll()},pinFolder:{title:()=>o("Pin Folder"),action:()=>{t.pinnedFolders=t.pinnedFolders.concat(r.value),t.storage.setStore("pinned-folders",t.pinnedFolders)}},unpinFolder:{title:()=>o("Unpin Folder"),action:()=>{t.pinnedFolders=t.pinnedFolders.filter(u=>!r.value.find(f=>f.path===u.path)),t.storage.setStore("pinned-folders",t.pinnedFolders)}},delete:{key:J.DELETE,title:()=>o("Delete"),action:()=>{t.modal.open(Tn,{items:r})}},refresh:{title:()=>o("Refresh"),action:()=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})}},preview:{key:J.PREVIEW,title:()=>o("Preview"),action:()=>t.modal.open(cr,{adapter:t.fs.adapter,item:r.value[0]})},open:{title:()=>o("Open"),action:()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:r.value[0].path}})}},openDir:{title:()=>o("Open containing folder"),action:()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:r.value[0].dir}})}},download:{key:J.DOWNLOAD,link:e.computed(()=>t.requester.getDownloadUrl(t.fs.adapter,r.value[0])),title:()=>o("Download"),action:()=>{}},archive:{key:J.ARCHIVE,title:()=>o("Archive"),action:()=>t.modal.open(ar,{items:r})},unarchive:{key:J.UNARCHIVE,title:()=>o("Unarchive"),action:()=>t.modal.open(sr,{items:r})},rename:{key:J.RENAME,title:()=>o("Rename"),action:()=>t.modal.open(Mt,{items:r})},updateDocType:{key:J.UPDATEDOCTYPE,title:()=>o("Update Document Type"),action:()=>t.modal.open(Mt,{items:r})}},d=u=>{t.emitter.emit("vf-contextmenu-hide"),u.action()};t.emitter.on("vf-search-query",({newQuery:u})=>{i.value=u}),t.emitter.on("vf-contextmenu-show",({event:u,items:f,target:v=null})=>{if(a.items=[],i.value)if(v)a.items.push(l.openDir),t.emitter.emit("vf-context-selected",[v]);else return;else!v&&!i.value?(a.items.push(l.refresh),a.items.push(l.selectAll),a.items.push(l.newfolder),t.emitter.emit("vf-context-selected",[])):f.length>1&&f.some(_=>_.path===v.path)?(a.items.push(l.refresh),a.items.push(l.archive),a.items.push(l.delete),t.emitter.emit("vf-context-selected",f)):(v.type==="dir"?(a.items.push(l.open),t.pinnedFolders.findIndex(_=>_.path===v.path)!==-1?a.items.push(l.unpinFolder):a.items.push(l.pinFolder)):(a.items.push(l.preview),a.items.push(l.download),a.items.push(l.updateDocType)),a.items.push(l.rename),v.mime_type==="application/zip"?a.items.push(l.unarchive):a.items.push(l.archive),a.items.push(l.delete),t.emitter.emit("vf-context-selected",[v]));m(u)}),t.emitter.on("vf-contextmenu-hide",()=>{a.active=!1});const m=u=>{const f=t.dragSelect.area.value,v=t.root.getBoundingClientRect(),_=f.getBoundingClientRect();let D=u.clientX-v.left,p=u.clientY-v.top;a.active=!0,e.nextTick(()=>{var k;const y=(k=s.value)==null?void 0:k.getBoundingClientRect();let N=(y==null?void 0:y.height)??0,B=(y==null?void 0:y.width)??0;D=_.right-u.pageX+window.scrollX<B?D-B:D,p=_.bottom-u.pageY+window.scrollY<N?p-N:p,a.positions={left:D+"px",top:p+"px"}})};return(u,f)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:s,style:e.normalizeStyle(a.positions),class:"vuefinder__context-menu"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,v=>(e.openBlock(),e.createElementBlock("li",{class:"vuefinder__context-menu__item",key:v.title},[v.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"vuefinder__context-menu__link",target:"_blank",href:v.link,download:v.link,onClick:f[0]||(f[0]=_=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(v.title()),1)],8,Nu)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"vuefinder__context-menu__action",onClick:_=>d(v)},[e.createElementVNode("span",null,e.toDisplayString(v.title()),1)],8,xu))]))),128))],4)),[[e.vShow,a.active]])}},Cu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function $u(n,t){return e.openBlock(),e.createElementBlock("svg",Cu,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1)]))}const ur={render:$u},Du={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",class:"h-5 w-5 stroke-slate-500 cursor-pointer",viewBox:"0 0 24 24"};function Tu(n,t){return e.openBlock(),e.createElementBlock("svg",Du,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1)]))}const Mu={render:Tu},Au={class:"vuefinder__status-bar__wrapper"},Lu={class:"vuefinder__status-bar__storage"},Fu=["title"],Ou={class:"vuefinder__status-bar__storage-icon"},Ru=["value"],Hu={class:"vuefinder__status-bar__info"},zu={key:0},Uu={class:"vuefinder__status-bar__selected-count"},Iu={class:"vuefinder__status-bar__actions"},ju=["disabled"],qu=["title"],Pu={__name:"Statusbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{setStore:s}=t.storage,r=t.dragSelect,i=()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter}}),s("adapter",t.fs.adapter)},a=e.ref("");t.emitter.on("vf-search-query",({newQuery:l})=>{a.value=l});const c=e.computed(()=>{const l=t.selectButton.multiple?r.getSelected().length>0:r.getSelected().length===1;return t.selectButton.active&&l});return(l,d)=>(e.openBlock(),e.createElementBlock("div",Au,[e.createElementVNode("div",Lu,[e.createElementVNode("div",{class:"vuefinder__status-bar__storage-container",title:e.unref(o)("Storage")},[e.createElementVNode("div",Ou,[e.createVNode(e.unref(ur))]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":d[0]||(d[0]=m=>e.unref(t).fs.adapter=m),onChange:i,class:"vuefinder__status-bar__storage-select",tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.data.storages,m=>(e.openBlock(),e.createElementBlock("option",{value:m},e.toDisplayString(m),9,Ru))),256))],544),[[e.vModelSelect,e.unref(t).fs.adapter]])],8,Fu),e.createElementVNode("div",Hu,[a.value.length?(e.openBlock(),e.createElementBlock("span",zu,e.toDisplayString(e.unref(t).fs.data.files.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",Uu,e.toDisplayString(e.unref(t).dragSelect.getCount()>0?e.unref(o)("%s item(s) selected.",e.unref(t).dragSelect.getCount()):""),1)])]),e.createElementVNode("div",Iu,[e.unref(t).selectButton.active?(e.openBlock(),e.createElementBlock("button",{key:0,class:e.normalizeClass(["vf-btn py-0 vf-btn-primary",{disabled:!c.value}]),disabled:!c.value,onClick:d[1]||(d[1]=m=>e.unref(t).selectButton.click(e.unref(r).getSelected(),m))},e.toDisplayString(e.unref(o)("Select")),11,ju)):e.createCommentVNode("",!0),e.createElementVNode("span",{class:"vuefinder__status-bar__about",title:e.unref(o)("About"),onClick:d[2]||(d[2]=m=>e.unref(t).modal.open(Jo))},[e.createVNode(e.unref(Mu))],8,qu)])]))}},Gu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"text-neutral-500 fill-sky-500 stroke-gray-100/50 dark:stroke-slate-700/50 dark:fill-slate-500",viewBox:"0 0 24 24"};function Ku(n,t){return e.openBlock(),e.createElementBlock("svg",Gu,t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1)]))}const mr={render:Ku},Wu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function Yu(n,t){return e.openBlock(),e.createElementBlock("svg",Wu,t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1)]))}const Xu={render:Yu},Ju={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Zu(n,t){return e.openBlock(),e.createElementBlock("svg",Ju,t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M15 12H9M12 9v6"},null,-1)]))}const fr={render:Zu},Qu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function em(n,t){return e.openBlock(),e.createElementBlock("svg",Qu,t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 12h6"},null,-1)]))}const vr={render:em};function pr(n,t){const o=n.findIndex(s=>s.path===t.path);o>-1?n[o]=t:n.push(t)}const tm={class:"vuefinder__folder-loader-indicator"},nm={key:1,class:"vuefinder__folder-loader-indicator--icon"},_r={__name:"FolderLoaderIndicator",props:e.mergeModels({adapter:{type:String,required:!0},path:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=n,o=e.inject("ServiceContainer");o.i18n;const s=e.useModel(n,"modelValue"),r=e.ref(!1);e.watch(()=>s.value,()=>{var c;return((c=i())==null?void 0:c.folders.length)||a()});function i(){return o.treeViewData.find(c=>c.path===t.path)}const a=()=>{r.value=!0,o.requester.send({url:"",method:"get",params:{q:"subfolders",adapter:t.adapter,path:t.path}}).then(c=>{pr(o.treeViewData,{path:t.path,...c})}).catch(c=>{}).finally(()=>{r.value=!1})};return(c,l)=>{var d;return e.openBlock(),e.createElementBlock("div",tm,[r.value?(e.openBlock(),e.createBlock(e.unref(Mn),{key:0,class:"vuefinder__folder-loader-indicator--loading"})):(e.openBlock(),e.createElementBlock("div",nm,[s.value&&((d=i())!=null&&d.folders.length)?(e.openBlock(),e.createBlock(e.unref(vr),{key:0,class:"vuefinder__folder-loader-indicator--minus"})):e.createCommentVNode("",!0),s.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(fr),{key:1,class:"vuefinder__folder-loader-indicator--plus"}))]))])}}},om={class:"vuefinder__treesubfolderlist__item-content"},rm=["onClick"],sm=["title","onClick"],lm={class:"vuefinder__treesubfolderlist__item-icon"},am={class:"vuefinder__treesubfolderlist__subfolder"},im={__name:"TreeSubfolderList",props:{adapter:{type:String,required:!0},path:{type:String,required:!0}},setup(n){const t=e.inject("ServiceContainer"),o=e.ref([]),s=n,r=e.ref(null);e.onMounted(()=>{s.path===s.adapter+"://"&&xe(r.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})});const i=e.computed(()=>{var a;return((a=t.treeViewData.find(c=>c.path===s.path))==null?void 0:a.folders)||[]});return(a,c)=>{const l=e.resolveComponent("TreeSubfolderList",!0);return e.openBlock(),e.createElementBlock("ul",{ref_key:"parentSubfolderList",ref:r,class:"vuefinder__treesubfolderlist__container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(d,m)=>(e.openBlock(),e.createElementBlock("li",{key:d.path,class:"vuefinder__treesubfolderlist__item"},[e.createElementVNode("div",om,[e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-toggle",onClick:u=>o.value[d.path]=!o.value[d.path]},[e.createVNode(_r,{adapter:n.adapter,path:d.path,modelValue:o.value[d.path],"onUpdate:modelValue":u=>o.value[d.path]=u},null,8,["adapter","path","modelValue","onUpdate:modelValue"])],8,rm),e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-link",title:d.path,onClick:u=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:s.adapter,path:d.path}})},[e.createElementVNode("div",lm,[e.unref(t).fs.path===d.path?(e.openBlock(),e.createBlock(e.unref(mr),{key:0})):(e.openBlock(),e.createBlock(e.unref(It),{key:1}))]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treesubfolderlist__item-text",{"vuefinder__treesubfolderlist__item-text--active":e.unref(t).fs.path===d.path}])},e.toDisplayString(d.basename),3)],8,sm)]),e.createElementVNode("div",am,[e.withDirectives(e.createVNode(l,{adapter:s.adapter,path:d.path},null,8,["adapter","path"]),[[e.vShow,o.value[d.path]]])])]))),128))],512)}}},cm={class:"vuefinder__treestorageitem__loader"},dm={__name:"TreeStorageItem",props:{storage:{type:String,required:!0}},setup(n){const t=e.inject("ServiceContainer"),o=e.ref(!1);return(s,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:r[1]||(r[1]=i=>o.value=!o.value),class:"vuefinder__treestorageitem__header"},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__info",n.storage===e.unref(t).fs.adapter?"vuefinder__treestorageitem__info--active":""])},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__icon",n.storage===e.unref(t).fs.adapter?"vuefinder__treestorageitem__icon--active":""])},[e.createVNode(e.unref(ur))],2),e.createElementVNode("div",null,e.toDisplayString(n.storage),1)],2),e.createElementVNode("div",cm,[e.createVNode(_r,{adapter:n.storage,path:n.storage+"://",modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=i=>o.value=i)},null,8,["adapter","path","modelValue"])])]),e.withDirectives(e.createVNode(im,{adapter:n.storage,path:n.storage+"://",class:"vuefinder__treestorageitem__subfolder"},null,8,["adapter","path"]),[[e.vShow,o.value]])],64))}},um={class:"vuefinder__folder-indicator"},mm={class:"vuefinder__folder-indicator--icon"},fm={__name:"FolderIndicator",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const t=e.useModel(n,"modelValue");return(o,s)=>(e.openBlock(),e.createElementBlock("div",um,[e.createElementVNode("div",mm,[t.value?(e.openBlock(),e.createBlock(e.unref(vr),{key:0,class:"vuefinder__folder-indicator--minus"})):e.createCommentVNode("",!0),t.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(fr),{key:1,class:"vuefinder__folder-indicator--plus"}))])]))}},vm={class:"vuefinder__treeview__header"},pm={class:"vuefinder__treeview__pinned-label"},_m={class:"vuefinder__treeview__pin-text text-nowrap"},hm={key:0,class:"vuefinder__treeview__pinned-list"},gm={class:"vuefinder__treeview__pinned-item"},km=["onClick"],wm=["title"],bm=["onClick"],ym={key:0},Em={class:"vuefinder__treeview__no-pinned"},Vm={class:"vuefinder__treeview__storage"},Sm={__name:"TreeView",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{getStore:s,setStore:r}=t.storage,i=e.ref(190),a=e.ref(s("pinned-folders-opened",!0));e.watch(a,m=>r("pinned-folders-opened",m));const c=m=>{t.pinnedFolders=t.pinnedFolders.filter(u=>u.path!==m.path),t.storage.setStore("pinned-folders",t.pinnedFolders)},l=m=>{const u=m.clientX,f=m.target.parentElement,v=f.getBoundingClientRect().width;f.classList.remove("transition-[width]"),f.classList.add("transition-none");const _=p=>{i.value=v+p.clientX-u,i.value<50&&(i.value=0,t.showTreeView=!1),i.value>50&&(t.showTreeView=!0)},D=()=>{const p=f.getBoundingClientRect();i.value=p.width,f.classList.add("transition-[width]"),f.classList.remove("transition-none"),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",D)};window.addEventListener("mousemove",_),window.addEventListener("mouseup",D)},d=e.ref(null);return e.onMounted(()=>{xe(d.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})}),e.watch(t.fs.data,(m,u)=>{const f=m.files.filter(v=>v.type==="dir");pr(t.treeViewData,{path:t.fs.path,folders:f.map(v=>({adapter:v.storage,path:v.path,basename:v.basename}))})}),(m,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:u[0]||(u[0]=f=>e.unref(t).showTreeView=!e.unref(t).showTreeView),class:e.normalizeClass(["vuefinder__treeview__overlay",e.unref(t).showTreeView?"vuefinder__treeview__backdrop":"hidden"])},null,2),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(t).showTreeView?"min-width:100px;max-width:75%; width: "+i.value+"px":"width: 0"),class:"vuefinder__treeview__container"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:d,class:"vuefinder__treeview__scroll"},[e.createElementVNode("div",vm,[e.createElementVNode("div",{onClick:u[2]||(u[2]=f=>a.value=!a.value),class:"vuefinder__treeview__pinned-toggle"},[e.createElementVNode("div",pm,[e.createVNode(e.unref(dr),{class:"vuefinder__treeview__pin-icon"}),e.createElementVNode("div",_m,e.toDisplayString(e.unref(o)("Pinned Folders")),1)]),e.createVNode(fm,{modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=f=>a.value=f)},null,8,["modelValue"])]),a.value?(e.openBlock(),e.createElementBlock("ul",hm,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).pinnedFolders,f=>(e.openBlock(),e.createElementBlock("li",gm,[e.createElementVNode("div",{class:"vuefinder__treeview__pinned-folder",onClick:v=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:f.storage,path:f.path}})},[e.unref(t).fs.path!==f.path?(e.openBlock(),e.createBlock(e.unref(It),{key:0,class:"vuefinder__treeview__folder-icon"})):e.createCommentVNode("",!0),e.unref(t).fs.path===f.path?(e.openBlock(),e.createBlock(e.unref(mr),{key:1,class:"vuefinder__treeview__open-folder-icon"})):e.createCommentVNode("",!0),e.createElementVNode("div",{title:f.path,class:e.normalizeClass(["vuefinder__treeview__folder-name text-nowrap",{"vuefinder__treeview__folder-name--active":e.unref(t).fs.path===f.path}])},e.toDisplayString(f.basename),11,wm)],8,km),e.createElementVNode("div",{class:"vuefinder__treeview__remove-favorite",onClick:v=>c(f)},[e.createVNode(e.unref(Xu),{class:"vuefinder__treeview__remove-icon"})],8,bm)]))),256)),e.unref(t).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",ym,[e.createElementVNode("div",Em,e.toDisplayString(e.unref(o)("No folders pinned")),1)]))])):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t).fs.data.storages,f=>(e.openBlock(),e.createElementBlock("div",Vm,[e.createVNode(dm,{storage:f},null,8,["storage"])]))),256))],512),e.createElementVNode("div",{onMousedown:l,class:e.normalizeClass([(e.unref(t).showTreeView,""),"vuefinder__treeview__resize-handle"])},null,34)],4)],64))}},Nm={class:"vuefinder__main__content"},xm={__name:"VueFinder",props:{id:{type:String,default:"vf"},request:{type:[String,Object],required:!0},persist:{type:Boolean,default:!1},path:{type:String,default:""},features:{type:[Array,Boolean],default:!0},debug:{type:Boolean,default:!1},theme:{type:String,default:"system"},locale:{type:String,default:null},maxHeight:{type:String,default:"600px"},maxFileSize:{type:String,default:"10mb"},fullScreen:{type:Boolean,default:!1},showTreeView:{type:Boolean,default:!1},pinnedFolders:{type:Array,default:[]},showThumbnails:{type:Boolean,default:!0},selectButton:{type:Object,default(n){return{active:!1,multiple:!1,click:t=>{},...n}}}},emits:["select"],setup(n,{emit:t}){const o=t,r=qs(n,e.inject("VueFinderOptions"));e.provide("ServiceContainer",r);const{setStore:i}=r.storage,a=e.ref(null);r.root=a;const c=r.dragSelect;ba(r);const l=m=>{Object.assign(r.fs.data,m),c.clearSelection(),c.refreshSelection()};let d;return r.emitter.on("vf-fetch-abort",()=>{d.abort(),r.fs.loading=!1}),r.emitter.on("vf-fetch",({params:m,body:u=null,onSuccess:f=null,onError:v=null,noCloseModal:_=!1})=>{["index","search"].includes(m.q)&&(d&&d.abort(),r.fs.loading=!0),d=new AbortController;const D=d.signal;r.requester.send({url:"",method:m.m||"get",params:m,body:u,abortSignal:D}).then(p=>{r.fs.adapter=p.adapter,r.persist&&(r.fs.path=p.dirname,i("path",r.fs.path)),["index","search"].includes(m.q)&&(r.fs.loading=!1),_||r.modal.close(),l(p),f&&f(p)}).catch(p=>{console.error(p),v&&v(p)})}),e.onMounted(()=>{let m={};r.fs.path.includes("://")&&(m={adapter:r.fs.path.split("://")[0],path:r.fs.path}),r.emitter.emit("vf-fetch",{params:{q:"index",adapter:r.fs.adapter,...m}}),c.onSelect(u=>{o("select",u)})}),(m,u)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder",ref_key:"root",ref:a,tabindex:"0"},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(r).theme.actualValue)},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(r).fullScreen?"vuefinder__main__fixed":"vuefinder__main__relative","vuefinder__main__container"]),style:e.normalizeStyle(e.unref(r).fullScreen?"":"max-height: "+n.maxHeight),onMousedown:u[0]||(u[0]=f=>e.unref(r).emitter.emit("vf-contextmenu-hide")),onTouchstart:u[1]||(u[1]=f=>e.unref(r).emitter.emit("vf-contextmenu-hide"))},[e.createVNode(Wi),e.createVNode(Jc),e.createElementVNode("div",Nm,[e.createVNode(Sm),e.createVNode(Su)]),e.createVNode(Pu)],38),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(r).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1}),e.createVNode(Bu)],2)],512))}},Bm={install(n,t={}){t.i18n=t.i18n??{};let[o]=Object.keys(t.i18n);t.locale=t.locale??o??"en",n.provide("VueFinderOptions",t),n.component("VueFinder",xm)}};module.exports=Bm;
